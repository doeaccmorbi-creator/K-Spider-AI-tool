<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Business Consultant ‚Äî K Spider AI Tool | Premium</title>
<meta name="description" content="8-module AI Business Consultant: Idea Validator, Market Research, Brand Names, Business Plan, Pricing, Financials, Pitch Deck, Legal Checklist. Free on K Spider AI Tool.">
<link rel="canonical" href="https://www.kspiderai.in/tools/ai-business-consultant.html">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f8f7f4;--bg2:#ffffff;--bg3:#f2f0eb;--bg4:#eceae3;--bg5:#e4e0d7;
  --g:#b8792a;--g2:#d4922e;--g3:#f0a830;
  --gs:rgba(184,121,42,.08);--gb:rgba(184,121,42,.22);--gg:rgba(184,121,42,.32);
  --t1:#1a1814;--t2:#3a3530;--t3:#6a6460;--t4:#9a9490;--t5:#c8c4bc;
  --gr:#059669;--grs:rgba(5,150,105,.1);
  --bl:#2563eb;--bls:rgba(37,99,235,.09);
  --rd:#dc2626;--rds:rgba(220,38,38,.08);
  --br:rgba(0,0,0,.07);--br2:rgba(0,0,0,.13);--brg:rgba(184,121,42,.26);
  --r4:6px;--r8:12px;--r12:18px;
  --ease:cubic-bezier(.22,1,.36,1);--es:cubic-bezier(.34,1.56,.64,1);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--t1);min-height:100vh;-webkit-font-smoothing:antialiased;overflow-x:hidden}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:var(--bg3)}
::-webkit-scrollbar-thumb{background:var(--bg5);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--g)}

/* TOPBAR */
.topbar{position:fixed;top:0;left:0;right:0;z-index:900;height:58px;background:rgba(248,247,244,.97);backdrop-filter:blur(20px);border-bottom:1px solid var(--br);box-shadow:0 2px 18px rgba(0,0,0,.05)}
.tbi{max-width:1440px;margin:0 auto;padding:0 22px;height:100%;display:flex;align-items:center;justify-content:space-between;gap:12px}
.tbrand{display:flex;align-items:center;gap:9px;text-decoration:none;flex-shrink:0}
.tlogo{width:34px;height:34px;border-radius:9px;background:var(--t1);display:flex;align-items:center;justify-content:center;font-size:1rem;box-shadow:0 3px 10px rgba(0,0,0,.16)}
.tname{font-family:'Syne',sans-serif;font-size:.8rem;font-weight:800;color:var(--t1);line-height:1.2}
.tname .ai{color:var(--g2)}
.tcenter{display:flex;align-items:center;gap:7px;background:var(--gs);border:1px solid var(--brg);border-radius:100px;padding:4px 13px 4px 8px}
.tdot{width:6px;height:6px;border-radius:50%;background:var(--g3);animation:pulse 2s infinite;flex-shrink:0}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.35}}
.tctxt{font-size:.68rem;font-weight:700;color:var(--g2);letter-spacing:.8px;text-transform:uppercase}
.tright{display:flex;align-items:center;gap:7px}
.tbadge{padding:4px 11px;border-radius:100px;background:var(--gs);border:1px solid var(--brg);font-size:.61rem;font-weight:800;letter-spacing:1px;text-transform:uppercase;color:var(--g2)}
.tback{display:inline-flex;align-items:center;gap:5px;padding:6px 13px;background:var(--bg3);border:1px solid var(--br);border-radius:var(--r4);font-size:.72rem;font-weight:600;color:var(--t2);text-decoration:none;transition:all .2s}
.tback:hover{border-color:var(--brg);color:var(--g2)}

/* LAYOUT */
.app{display:grid;grid-template-columns:266px 1fr;min-height:100vh;padding-top:58px}

/* SIDEBAR */
.sidebar{position:sticky;top:58px;height:calc(100vh - 58px);overflow-y:auto;background:var(--bg2);border-right:1px solid var(--br);padding:20px 0;scrollbar-width:none}
.sidebar::-webkit-scrollbar{display:none}
.sbh{padding:0 17px 17px;border-bottom:1px solid var(--br);margin-bottom:4px}
.sbt{font-family:'Syne',sans-serif;font-size:1.15rem;font-weight:800;color:var(--t1);line-height:1.15;margin-bottom:4px}
.sbt span{color:var(--g2)}
.sbd{font-size:.7rem;color:var(--t3);line-height:1.6}
.sblbl{padding:12px 17px 5px;font-size:.55rem;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:var(--t5)}
.sbitem{display:flex;align-items:center;gap:8px;padding:8px 17px;cursor:pointer;transition:all .17s;position:relative;border:none;background:transparent;width:100%;text-align:left}
.sbitem::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:0;background:linear-gradient(to bottom,var(--g),var(--g2));border-radius:0 2px 2px 0;transition:height .22s var(--ease)}
.sbitem:hover::before,.sbitem.active::before{height:66%}
.sbitem:hover{background:var(--bg3)}.sbitem.active{background:var(--gs)}
.sbitem.active .sbn{color:var(--g2);border-color:var(--brg);background:rgba(184,121,42,.11)}
.sbitem.active .sbnm{color:var(--t1)}.sbitem.done .sbn{background:var(--gr);border-color:transparent;color:#fff;font-size:.7rem}
.sbn{width:22px;height:22px;flex-shrink:0;border-radius:6px;border:1px solid var(--br);display:flex;align-items:center;justify-content:center;font-size:.68rem;font-weight:800;color:var(--t4);transition:all .17s}
.sbnm{font-size:.76rem;font-weight:600;color:var(--t3);transition:color .17s;line-height:1.3}
.sbtag{margin-left:auto;flex-shrink:0;font-size:.52rem;font-weight:800;padding:2px 7px;border-radius:100px;letter-spacing:.5px;text-transform:uppercase}
.tfree{background:var(--grs);color:var(--gr);border:1px solid rgba(5,150,105,.18)}.tpro{background:var(--gs);color:var(--g2);border:1px solid var(--brg)}
.sbdiv{height:1px;background:var(--br);margin:10px 17px}
.sbpdf{margin:11px 17px 0;display:flex;align-items:center;justify-content:center;gap:7px;padding:11px 14px;background:var(--t1);color:#fff;font-family:'DM Sans',sans-serif;font-weight:800;font-size:.76rem;border:none;border-radius:var(--r8);cursor:pointer;transition:all .24s var(--ease);box-shadow:0 4px 14px rgba(0,0,0,.17)}
.sbpdf:hover{background:var(--g2);box-shadow:0 8px 24px var(--gg)}.sbpdf:disabled{opacity:.4;cursor:not-allowed;box-shadow:none}
.sbchs{margin:13px 17px 8px;padding:12px;background:var(--bg3);border:1px solid var(--br);border-radius:var(--r8)}
.sbcht{font-size:.57rem;font-weight:800;letter-spacing:1.5px;text-transform:uppercase;color:var(--t5);margin-bottom:8px}
.sbchl{display:flex;align-items:center;gap:7px;padding:5px 0;text-decoration:none;border-bottom:1px solid var(--br);transition:all .17s}
.sbchl:last-child{border-bottom:none}.sbchl:hover .sbchn{color:var(--g2)}
.sbchi{width:19px;height:19px;border-radius:4px;background:#ff0000;display:flex;align-items:center;justify-content:center;font-size:.62rem;flex-shrink:0;color:#fff}
.sbchn{font-size:.7rem;font-weight:600;color:var(--t2);line-height:1.2}
.sbchs2{font-size:.6rem;color:var(--t4)}

/* MAIN */
.main{background:var(--bg)}

/* LANGUAGE BAR */
.lbar{background:var(--bg2);border-bottom:1px solid var(--br);padding:9px 34px;display:flex;align-items:center;gap:13px;flex-wrap:wrap}
.lbar label{font-size:.64rem;font-weight:800;letter-spacing:1.2px;text-transform:uppercase;color:var(--t4);white-space:nowrap}
.lsel{padding:6px 28px 6px 11px;background:var(--bg3);border:1px solid var(--br);border-radius:var(--r4);font-family:'DM Sans',sans-serif;font-size:.78rem;color:var(--t1);outline:none;cursor:pointer;transition:all .18s;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23999' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 9px center}
.lsel:focus{border-color:var(--brg);box-shadow:0 0 0 3px var(--gs)}
.lnote{font-size:.7rem;color:var(--t4)}

/* MODULES */
.mod{display:none;padding:32px 36px;animation:fi .3s var(--ease)}.mod.active{display:block}
@keyframes fi{from{opacity:0;transform:translateY(9px)}to{opacity:1;transform:translateY(0)}}

/* MODULE HEADER */
.mhd{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:24px;gap:13px}
.mey{display:inline-flex;align-items:center;gap:5px;font-size:.57rem;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:var(--g2);margin-bottom:8px}
.mey::before{content:'';width:14px;height:1px;background:var(--gb)}
.mttl{font-family:'Syne',sans-serif;font-size:clamp(1.5rem,2.5vw,2.2rem);font-weight:800;color:var(--t1);line-height:1.1;letter-spacing:-.03em;margin-bottom:7px}
.mttl .hl{color:var(--g2)}
.msub{font-size:.85rem;color:var(--t2);line-height:1.72;max-width:520px}
.mic{width:54px;height:54px;border-radius:14px;background:var(--gs);border:1px solid var(--brg);display:flex;align-items:center;justify-content:center;font-size:1.7rem;flex-shrink:0}

/* FORMS */
.gf{display:grid;gap:14px}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.g3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px}
.fg{display:flex;flex-direction:column;gap:6px}
.fg label{font-size:.64rem;font-weight:800;letter-spacing:1.3px;text-transform:uppercase;color:var(--t3)}
.fg input,.fg select,.fg textarea{padding:11px 13px;background:var(--bg3);border:1px solid var(--br);border-radius:var(--r8);color:var(--t1);font-family:'DM Sans',sans-serif;font-size:.86rem;outline:none;transition:all .19s;width:100%}
.fg input::placeholder,.fg textarea::placeholder{color:var(--t5)}
.fg input:focus,.fg select:focus,.fg textarea:focus{border-color:var(--brg);background:var(--bg2);box-shadow:0 0 0 3px var(--gs)}
.fg select{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23999' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 11px center;background-color:var(--bg3);padding-right:30px}
.fg select:focus{background-color:var(--bg2)}
.fg textarea{resize:vertical;min-height:85px;line-height:1.65}
.rw{position:relative;padding-top:4px}
.rv{position:absolute;right:0;top:-18px;font-size:.72rem;font-weight:700;color:var(--g2)}
input[type=range]{-webkit-appearance:none;width:100%;height:4px;background:var(--bg4);border-radius:2px;outline:none;border:none!important;padding:0!important;box-shadow:none!important}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:17px;height:17px;border-radius:50%;background:linear-gradient(135deg,var(--g),var(--g2));cursor:pointer;box-shadow:0 2px 8px var(--gg);transition:transform .14s}
input[type=range]::-webkit-slider-thumb:hover{transform:scale(1.25)}
.chips{display:flex;flex-wrap:wrap;gap:5px;margin-top:3px}
.chip{padding:5px 11px;border-radius:100px;font-size:.7rem;font-weight:600;cursor:pointer;transition:all .16s;border:1px solid var(--br);background:var(--bg3);color:var(--t3)}
.chip:hover{border-color:var(--brg);color:var(--g2)}.chip.sel{background:var(--gs);border-color:var(--brg);color:var(--g2)}
.srow{display:flex;align-items:center;gap:11px;margin-top:24px;padding-top:20px;border-top:1px solid var(--br);flex-wrap:wrap}
.bgen{display:inline-flex;align-items:center;gap:8px;padding:12px 26px;background:var(--t1);color:#fff;font-family:'DM Sans',sans-serif;font-weight:800;font-size:.86rem;border:none;border-radius:var(--r8);cursor:pointer;transition:all .25s var(--ease);box-shadow:0 4px 14px rgba(0,0,0,.18)}
.bgen:hover{background:var(--g2);box-shadow:0 8px 24px var(--gg);transform:translateY(-2px)}.bgen:disabled{opacity:.42;cursor:not-allowed;transform:none;box-shadow:none}
.bht{font-size:.71rem;color:var(--t4)}
.alert{display:flex;gap:9px;align-items:flex-start;padding:11px 14px;border-radius:var(--r8);margin-bottom:16px;font-size:.76rem;line-height:1.6}
.aicon{flex-shrink:0;font-size:.92rem;margin-top:1px}
.aw{background:rgba(245,158,11,.07);border:1px solid rgba(245,158,11,.2);color:#b45309}

/* LOADING */
.ldst{display:none;flex-direction:column;align-items:center;justify-content:center;padding:64px 26px;text-align:center;gap:20px}
.ldst.show{display:flex}
.ldo{width:50px;height:50px;border-radius:50%;border:3px solid var(--bg4);border-top-color:var(--g);border-right-color:var(--g2);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.ldt{font-family:'Syne',sans-serif;font-size:1.18rem;font-weight:700;color:var(--t1)}
.ldss{display:flex;flex-direction:column;gap:8px;min-width:240px}
.lds{display:flex;align-items:center;gap:8px;font-size:.78rem;color:var(--t4);transition:color .3s}
.lds.act{color:var(--g2);font-weight:600}.lds.done{color:var(--gr)}
.ldd{width:5px;height:5px;border-radius:50%;background:currentColor;flex-shrink:0}
.lds.act .ldd{animation:pulse 1s infinite}

/* RESULT */
.rp{display:none}.rp.show{display:block;animation:fi .36s var(--ease)}
.rt{display:flex;align-items:center;justify-content:space-between;gap:9px;flex-wrap:wrap;padding:12px 15px;background:var(--bg2);border:1px solid var(--br);border-radius:var(--r8);margin-bottom:16px;box-shadow:0 2px 10px rgba(0,0,0,.04)}
.rtl{display:flex;align-items:center;gap:7px}.rtr{display:flex;align-items:center;gap:5px;flex-wrap:wrap}
.rtbdg{display:inline-flex;align-items:center;gap:4px;font-size:.6rem;font-weight:800;letter-spacing:.8px;text-transform:uppercase;padding:3px 9px;border-radius:100px;background:var(--grs);color:var(--gr);border:1px solid rgba(5,150,105,.2)}
.rttl{font-size:.8rem;font-weight:700;color:var(--t1)}
.rb{display:inline-flex;align-items:center;gap:5px;padding:6px 11px;border-radius:var(--r4);font-size:.7rem;font-weight:700;cursor:pointer;transition:all .17s;border:none}
.rbc{background:var(--bg3);color:var(--t2);border:1px solid var(--br)}.rbc:hover{border-color:var(--brg);color:var(--g2)}
.rbp{background:var(--gs);color:var(--g2);border:1px solid var(--brg)}.rbp:hover{background:var(--gb);box-shadow:0 3px 10px var(--gg)}
.rbw{background:rgba(37,211,102,.1);color:#128c7e;border:1px solid rgba(37,211,102,.22)}.rbw:hover{background:rgba(37,211,102,.17)}
.rbn{background:var(--bg4);color:var(--t3);border:1px solid var(--br)}.rbn:hover{color:var(--t1)}
.rc{display:grid;gap:12px}
.card{background:var(--bg2);border:1px solid var(--br);border-radius:var(--r12);padding:19px 21px;position:relative;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.04)}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--gb),transparent)}
.chd{display:flex;align-items:center;gap:8px;margin-bottom:12px}
.ci{font-size:1.2rem}.ct{font-family:'Syne',sans-serif;font-size:.91rem;font-weight:700;color:var(--t1)}
.cbod{font-size:.82rem;color:var(--t2);line-height:1.8}
.cbod p{margin-bottom:8px}.cbod p:last-child{margin:0}.cbod strong{color:var(--t1)}

/* Score card */
.scr{display:grid;grid-template-columns:auto 1fr;gap:15px;align-items:center;background:linear-gradient(135deg,var(--bg3),var(--bg4));border:1px solid var(--brg);border-radius:var(--r12);padding:19px;box-shadow:0 4px 16px var(--gs)}
.srng{position:relative;width:72px;height:72px;flex-shrink:0}
.ssvg{transform:rotate(-90deg)}
.sbg{fill:none;stroke:var(--bg5);stroke-width:6}.sfg{fill:none;stroke:var(--g2);stroke-width:6;stroke-linecap:round}
.stxt{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.snum{font-family:'Syne',sans-serif;font-size:1.35rem;font-weight:800;color:var(--g2);line-height:1}
.sof{font-size:.49rem;color:var(--t4);letter-spacing:1px;text-transform:uppercase}
.sverd{font-family:'Syne',sans-serif;font-size:1.02rem;font-weight:800;color:var(--t1);margin-bottom:4px}
.shnt{font-size:.8rem;color:var(--t2);line-height:1.62}

/* SWOT */
.swg{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-top:10px}
.swc{border-radius:var(--r8);padding:11px 13px}
.ss{background:var(--grs);border:1px solid rgba(5,150,105,.18)}.sw{background:var(--rds);border:1px solid rgba(220,38,38,.18)}.so{background:var(--bls);border:1px solid rgba(37,99,235,.16)}.st{background:rgba(245,158,11,.07);border:1px solid rgba(245,158,11,.2)}
.swl{font-size:.57rem;font-weight:800;letter-spacing:1.4px;text-transform:uppercase;margin-bottom:6px;display:block}
.ss .swl{color:var(--gr)}.sw .swl{color:var(--rd)}.so .swl{color:var(--bl)}.st .swl{color:#d97706}
.swul{list-style:none}
.swul li{font-size:.75rem;color:var(--t2);padding:2px 0;display:flex;gap:5px;align-items:flex-start;line-height:1.4}
.swul li::before{content:'‚Ä¢';flex-shrink:0}
.ss .swul li::before{color:var(--gr)}.sw .swul li::before{color:var(--rd)}.so .swul li::before{color:var(--bl)}.st .swul li::before{color:#d97706}

/* Stats */
.stg{display:grid;grid-template-columns:repeat(3,1fr);gap:7px;margin-top:11px}
.stb{background:var(--bg3);border:1px solid var(--br);border-radius:var(--r8);padding:12px 13px;text-align:center}
.stv{font-family:'Syne',sans-serif;font-size:1.25rem;font-weight:800;color:var(--g2);margin-bottom:2px}
.stk{font-size:.59rem;font-weight:700;color:var(--t4);text-transform:uppercase;letter-spacing:.9px}

/* Timeline */
.tline{display:flex;flex-direction:column;margin-top:10px}
.tli{display:flex;gap:10px;align-items:flex-start}
.tlm{display:flex;flex-direction:column;align-items:center;flex-shrink:0}
.tld{width:8px;height:8px;border-radius:50%;background:var(--g2);flex-shrink:0;margin-top:4px;border:2px solid var(--bg2);box-shadow:0 0 0 2px var(--gb)}
.tll{width:1px;flex:1;background:var(--br);min-height:16px;margin-top:3px}
.tli:last-child .tll{display:none}
.tlb{padding-bottom:13px}
.tllb{font-size:.6rem;font-weight:800;letter-spacing:1px;text-transform:uppercase;color:var(--g2);margin-bottom:2px}
.tlt{font-size:.79rem;color:var(--t2);line-height:1.56}

/* Persona */
.peg{display:grid;grid-template-columns:repeat(3,1fr);gap:7px;margin-top:10px}
.pec{background:var(--bg3);border:1px solid var(--br);border-radius:var(--r8);padding:13px}
.peav{font-size:1.8rem;margin-bottom:5px;display:block}
.penm{font-weight:700;font-size:.82rem;color:var(--t1);margin-bottom:2px}
.perl{font-size:.67rem;color:var(--g2);font-weight:600;margin-bottom:6px}
.pedt{font-size:.73rem;color:var(--t3);line-height:1.5}

/* Competitor table */
.ptb{display:grid;gap:5px;margin-top:10px}
.pr{display:grid;grid-template-columns:1.8fr 1fr 1fr 1.8fr;gap:8px;padding:9px 12px;background:var(--bg3);border-radius:var(--r4);align-items:center;font-size:.77rem}
.pr.phd{background:var(--bg4);font-weight:700;font-size:.66rem;text-transform:uppercase;letter-spacing:.5px;color:var(--t3)}
.pr .pv{color:var(--g2);font-weight:700}

/* 3-tier */
.t3g{display:grid;grid-template-columns:repeat(3,1fr);gap:9px;margin-top:10px}
.t3c{border-radius:var(--r8);padding:13px;text-align:center}
.t3l{font-size:.6rem;font-weight:800;letter-spacing:1px;text-transform:uppercase;color:var(--t4);margin-bottom:4px}
.t3p{font-family:'Syne',sans-serif;font-size:1.25rem;font-weight:800;color:var(--g2);margin-bottom:5px}
.t3i{font-size:.73rem;color:var(--t3);line-height:1.5}

/* Slide grid */
.slg{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-top:10px}
.slc{background:var(--bg3);border:1px solid var(--br);border-radius:var(--r8);padding:12px}
.slnum{font-size:.56rem;font-weight:800;color:var(--g2);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px}
.slt{font-weight:700;font-size:.81rem;color:var(--t1);margin-bottom:4px}
.sln{font-size:.73rem;color:var(--t3);line-height:1.5}

/* Legal */
.leg{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:10px}
.lec{display:flex;align-items:flex-start;gap:8px;padding:10px 12px;background:var(--bg3);border:1px solid var(--br);border-radius:var(--r8)}
.lei{font-size:1rem;flex-shrink:0}
.len{font-weight:700;font-size:.78rem;color:var(--t1);margin-bottom:1px}
.led{font-size:.69rem;color:var(--t3);line-height:1.38}
.lec2{font-size:.64rem;color:var(--g2);font-weight:700;margin-top:2px}

/* Names */
.nmg{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:10px}
.nmc{background:var(--bg3);border:1px solid var(--br);border-radius:var(--r8);padding:12px 14px;transition:all .16s;cursor:pointer}
.nmc:hover{border-color:var(--brg);background:var(--gs)}
.nmw{font-family:'Syne',sans-serif;font-size:1rem;font-weight:800;color:var(--g2);margin-bottom:2px}
.nmt{font-size:.73rem;color:var(--t3);margin-bottom:4px;font-style:italic}
.nmm{font-size:.69rem;color:var(--t4);line-height:1.4}

/* Financial table */
.ftb{display:grid;gap:4px;margin-top:10px;overflow-x:auto}
.fr{display:grid;grid-template-columns:1.5fr repeat(4,1fr);gap:6px;padding:8px 12px;background:var(--bg3);border-radius:var(--r4);font-size:.75rem;align-items:center;min-width:520px}
.fr.fhd{background:var(--bg4);font-size:.64rem;font-weight:700;color:var(--t3);text-transform:uppercase;letter-spacing:.4px}
.fr .pos{color:var(--gr);font-weight:600}.fr .neg{color:var(--rd)}
.fr.ftot{background:var(--gs);border:1px solid var(--brg);font-weight:700}
.fr.ftot .pos{color:var(--g2)}

/* BRANDING FOOTER ‚Äî dark, professional */
/* BRANDING FOOTER ‚Äî full-width, all channels always shown */
.brf{margin-top:20px;padding:18px 20px;background:var(--t1);border-radius:var(--r12);display:flex;flex-direction:column;gap:14px}
.brf-top{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.bflr{display:flex;align-items:center;gap:8px}
.bflo{width:28px;height:28px;border-radius:7px;background:var(--g2);display:flex;align-items:center;justify-content:center;font-size:.8rem;flex-shrink:0}
.bfbn{font-family:'Syne',sans-serif;font-size:.82rem;font-weight:800;color:#fff}
.bfbn span{color:var(--g3)}
.bfurl{font-size:.71rem;font-weight:700;color:var(--g3);text-decoration:none}
.brf-chs{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.bfch{display:flex;align-items:center;gap:7px;text-decoration:none;padding:8px 10px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:var(--r8);transition:background .18s}
.bfch:hover{background:rgba(255,255,255,.12)}
.bfci{width:22px;height:22px;border-radius:5px;background:#ff0000;display:flex;align-items:center;justify-content:center;font-size:.65rem;color:#fff;flex-shrink:0}
.bfcn{font-size:.68rem;font-weight:600;color:rgba(255,255,255,.7);line-height:1.3}
.bfcns{font-size:.58rem;color:rgba(255,255,255,.35);display:block}
.bfdisc{font-size:.59rem;color:rgba(255,255,255,.25);line-height:1.5;border-top:1px solid rgba(255,255,255,.07);padding-top:10px}

/* WELCOME */
.wlc{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 116px);padding:42px 36px;text-align:center}
.wbdg{display:inline-flex;align-items:center;gap:6px;padding:5px 14px;border-radius:100px;background:var(--gs);border:1px solid var(--brg);font-size:.63rem;font-weight:800;letter-spacing:1.5px;text-transform:uppercase;color:var(--g2);margin-bottom:20px}
.wttl{font-family:'Syne',sans-serif;font-size:clamp(1.9rem,4.5vw,3.6rem);font-weight:800;color:var(--t1);line-height:1.05;letter-spacing:-.04em;margin-bottom:12px}
.wttl .hl{color:var(--g2)}
.wsub{font-size:.94rem;color:var(--t2);max-width:460px;line-height:1.8;margin-bottom:34px}
.wg{display:grid;grid-template-columns:repeat(4,1fr);gap:9px;margin-bottom:30px;width:100%;max-width:740px}
.wc{background:var(--bg2);border:1px solid var(--br);border-radius:var(--r12);padding:15px 10px;text-align:center;cursor:pointer;transition:all .23s var(--ease);box-shadow:0 2px 9px rgba(0,0,0,.04)}
.wc:hover{border-color:var(--brg);background:var(--gs);transform:translateY(-3px);box-shadow:0 10px 28px rgba(0,0,0,.09)}
.wi{font-size:1.6rem;margin-bottom:5px;display:block}.wn{font-size:.71rem;font-weight:700;color:var(--t2);line-height:1.3}
.wst{display:inline-flex;align-items:center;gap:7px;padding:13px 30px;background:var(--t1);color:#fff;font-family:'DM Sans',sans-serif;font-weight:800;font-size:.87rem;border:none;border-radius:var(--r8);cursor:pointer;transition:all .25s var(--ease);box-shadow:0 6px 18px rgba(0,0,0,.19)}
.wst:hover{background:var(--g2);box-shadow:0 10px 28px var(--gg);transform:translateY(-2px)}

/* TOAST */
.tw{position:fixed;bottom:19px;right:19px;z-index:9999;display:flex;flex-direction:column;gap:6px}
.ti{background:var(--bg2);border:1px solid var(--br);color:var(--t1);padding:10px 14px;border-radius:var(--r8);font-size:.78rem;box-shadow:0 9px 30px rgba(0,0,0,.12);display:flex;align-items:center;gap:7px;min-width:220px;animation:sl .25s var(--es)}
@keyframes sl{from{opacity:0;transform:translateX(15px)}to{opacity:1;transform:translateX(0)}}
.ts{border-left:3px solid var(--gr)}.te{border-left:3px solid var(--rd)}.tip{border-left:3px solid var(--g2)}.tw2{border-left:3px solid #f59e0b}

/* RESPONSIVE */
@media(max-width:960px){
  .app{grid-template-columns:1fr}
  .sidebar{position:relative;top:0;height:auto;padding:12px 0}
  .sbh{padding:10px 15px 12px}
  .mod{padding:20px 17px}
  .g2,.g3{grid-template-columns:1fr}
  .wg{grid-template-columns:repeat(2,1fr)}
  .swg,.slg,.leg,.nmg{grid-template-columns:1fr}
  .peg{grid-template-columns:1fr 1fr}
  .stg{grid-template-columns:1fr 1fr}
  .lbar{padding:8px 17px;gap:8px;flex-wrap:wrap}
  .brf-chs{grid-template-columns:1fr 1fr}
  .tcenter{display:none}
  .tbadge{display:none}
  .sbchs{display:none}
  /* sidebar becomes horizontal scroll on tablet */
  .sblbl{display:none}
  .sbdiv{display:none}
  .sbpdf{margin:8px 14px}
  .sidebar-mods{display:flex;overflow-x:auto;gap:4px;padding:0 14px;scrollbar-width:none}
  .sidebar-mods::-webkit-scrollbar{display:none}
  .sbitem{flex-shrink:0;padding:7px 12px;border-radius:var(--r4);border:1px solid var(--br);white-space:nowrap}
  .sbitem::before{display:none}
  .sbitem.active{background:var(--gs);border-color:var(--brg)}
  .sbnm{font-size:.72rem}
  .sbtag{display:none}
}
@media(max-width:600px){
  .mhd{flex-direction:column}
  .scr{grid-template-columns:1fr;text-align:center}
  .peg,.t3g{grid-template-columns:1fr}
  .brf-chs{grid-template-columns:1fr}
  .stg{grid-template-columns:1fr 1fr}
  .wg{grid-template-columns:repeat(2,1fr)}
  .lbar{flex-direction:column;align-items:flex-start;gap:5px}
  .lbar label{margin-top:3px;font-size:.62rem}
  .lsel{width:100%;font-size:.76rem}
  .lnote{display:none}
  .mod{padding:13px 12px}
  .rt{flex-direction:column;align-items:flex-start;gap:8px}
  .rtr{width:100%;display:flex;flex-wrap:wrap;gap:5px}
  .rb{flex:1;min-width:calc(50% - 3px);justify-content:center;font-size:.65rem;padding:8px 6px}
  .tright .tback{font-size:.64rem;padding:5px 9px}
  .tright .tbadge{display:none}
  .ftb{overflow-x:auto;-webkit-overflow-scrolling:touch}
  .fr{min-width:460px}
  .ptb{overflow-x:auto;-webkit-overflow-scrolling:touch}
  .pr{min-width:320px}
  .slg{grid-template-columns:1fr}
  .swg{grid-template-columns:1fr}
  .leg{grid-template-columns:1fr}
  .nmg{grid-template-columns:1fr}
  .sbitem{padding:6px 10px}
  .sbpdf{margin:7px 12px;font-size:.72rem;padding:9px 12px}
  .card{padding:15px 15px}
  .brf{padding:14px 15px}
  .brf-chs{grid-template-columns:1fr 1fr}
  .mttl{font-size:1.4rem}
  .wttl{font-size:1.85rem}
  .wg{grid-template-columns:repeat(2,1fr)}
  .sbh{padding:8px 13px 10px}
}
@media(max-width:600px){.mhd{flex-direction:column}.scr{grid-template-columns:1fr;text-align:center}.peg,.t3g{grid-template-columns:1fr}.pr{grid-template-columns:1fr 1fr}}

/* Mobile table scroll wrappers */
.tscroll{overflow-x:auto;-webkit-overflow-scrolling:touch;margin:10px -4px 0;padding:0 4px}
.tscroll-hint{font-size:.62rem;color:var(--t5);margin-bottom:5px;display:none}
.ftb,.ptb{overflow-x:auto;-webkit-overflow-scrolling:touch}
/* Ensure touch targets are large enough */
.bgen,.bsec,.rb,.sbpdf,.wst{min-height:44px}
.chip{min-height:36px;display:inline-flex;align-items:center}
/* Language bar compact on very small screens */
.lbar-wrap{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
/* Better form spacing on mobile */
@media(max-width:480px){
  .brf-chs{grid-template-columns:1fr}
  .stg{grid-template-columns:1fr}
  .wg{grid-template-columns:1fr 1fr}
  .bgen{width:100%;justify-content:center}
  .srow{flex-direction:column;align-items:stretch}
  .bht{text-align:center}
  .swg{grid-template-columns:1fr}
  .t3g{grid-template-columns:1fr}
  .peg{grid-template-columns:1fr}
  .sbitem .sbn{width:20px;height:20px;font-size:.64rem}
}

/* WhatsApp Modal */
.wa-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:9000;align-items:center;justify-content:center;padding:16px}
.wa-overlay.open{display:flex}
.wa-modal{background:var(--bg2);border-radius:var(--r12);padding:24px;width:100%;max-width:420px;box-shadow:0 20px 60px rgba(0,0,0,.25)}
.wa-modal h3{font-family:'Syne',sans-serif;font-size:1.1rem;font-weight:800;color:var(--t1);margin-bottom:5px}
.wa-modal p{font-size:.78rem;color:var(--t3);margin-bottom:16px;line-height:1.6}
.wa-modal .fg{margin-bottom:13px}
.wa-btns{display:flex;gap:8px;margin-top:6px}
.wa-send{flex:1;padding:11px;background:#25d366;color:#fff;font-weight:800;font-size:.85rem;border:none;border-radius:var(--r8);cursor:pointer;display:flex;align-items:center;justify-content:center;gap:7px}
.wa-send:hover{background:#1da855}
.wa-cancel{padding:11px 16px;background:var(--bg3);color:var(--t2);font-weight:700;font-size:.82rem;border:1px solid var(--br);border-radius:var(--r8);cursor:pointer}
.wa-cancel:hover{background:var(--bg4)}
.wa-note{font-size:.68rem;color:var(--t5);text-align:center;margin-top:9px;line-height:1.5}
</style>
</head>
<body>
<div class="tw" id="tw"></div>

<!-- TOPBAR -->
<header class="topbar">
  <div class="tbi">
    <a href="../index.html" class="tbrand"><div class="tlogo">üï∑Ô∏è</div><div class="tname">K Spider <span class="ai">AI Tool</span></div></a>
    <div class="tcenter"><div class="tdot"></div><span class="tctxt">AI Business Consultant</span></div>
    <div class="tright"><span class="tbadge">üíé Premium</span><a href="../index.html" class="tback">‚Üê Back to Hub</a></div>
  </div>
</header>

<div class="app">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sbh"><div class="sbt">Business <span>Consultant</span></div><div class="sbd">8 AI modules ¬∑ Complete business intelligence</div></div>
    <div class="sblbl">Modules</div>
    <div class="sidebar-mods">
    <button class="sbitem active" onclick="gm(0)" id="sb0"><div class="sbn" id="sbn0">‚ú¶</div><div class="sbnm">Home</div></button>
    <button class="sbitem" onclick="gm(1)" id="sb1"><div class="sbn" id="sbn1">1</div><div class="sbnm">Idea Validator</div><span class="sbtag tfree">Free</span></button>
    <button class="sbitem" onclick="gm(2)" id="sb2"><div class="sbn" id="sbn2">2</div><div class="sbnm">Market Research</div><span class="sbtag tpro">Pro</span></button>
    <button class="sbitem" onclick="gm(3)" id="sb3"><div class="sbn" id="sbn3">3</div><div class="sbnm">Brand Names</div><span class="sbtag tpro">Pro</span></button>
    <button class="sbitem" onclick="gm(4)" id="sb4"><div class="sbn" id="sbn4">4</div><div class="sbnm">Business Plan</div><span class="sbtag tpro">Pro</span></button>
    <button class="sbitem" onclick="gm(5)" id="sb5"><div class="sbn" id="sbn5">5</div><div class="sbnm">Pricing</div><span class="sbtag tpro">Pro</span></button>
    <button class="sbitem" onclick="gm(6)" id="sb6"><div class="sbn" id="sbn6">6</div><div class="sbnm">Financials</div><span class="sbtag tpro">Pro</span></button>
    <button class="sbitem" onclick="gm(7)" id="sb7"><div class="sbn" id="sbn7">7</div><div class="sbnm">Pitch Deck</div><span class="sbtag tpro">Pro</span></button>
    <button class="sbitem" onclick="gm(8)" id="sb8"><div class="sbn" id="sbn8">8</div><div class="sbnm">Legal</div><span class="sbtag tpro">Pro</span></button>
    </div>
    <div class="sbdiv"></div>
    <button class="sbpdf" id="pdf-btn" onclick="fullPDF()" disabled>üìÑ Export Full Report PDF</button>
    <div style="padding:8px 17px 0;font-size:.64rem;color:var(--t5);line-height:1.6">Complete 3+ modules to unlock full PDF.</div>
    <div class="sbchs">
      <div class="sbcht">üï∑Ô∏è K Spider on YouTube</div>
      <a href="https://www.youtube.com/@KSpider4Kreation" target="_blank" rel="noopener" class="sbchl"><div class="sbchi">‚ñ∂</div><div><div class="sbchn">K Spider for Kreation</div><div class="sbchs2">AI Tools ¬∑ Tech ¬∑ Marketing</div></div></a>
      <a href="https://www.youtube.com/@DoctorShreyanshRaval" target="_blank" rel="noopener" class="sbchl"><div class="sbchi" style="background:#e53935">‚öïÔ∏è</div><div><div class="sbchn">Doctor Shreyansh Raval</div><div class="sbchs2">Health ¬∑ NEET Prep</div></div></a>
      <a href="https://youtube.com/@swarseishwartak" target="_blank" rel="noopener" class="sbchl"><div class="sbchi" style="background:#7c3aed">üéµ</div><div><div class="sbchn">SwarSeIshwarTak</div><div class="sbchs2">Music ¬∑ Spiritual</div></div></a>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <!-- LANGUAGE BAR -->
    <div class="lbar">
      <label>Input Language:</label>
      <select class="lsel" id="il"><option value="English">üá¨üáß English</option><option value="Hindi">üáÆüá≥ Hindi</option><option value="Gujarati">üü† Gujarati</option><option value="Marathi">üîµ Marathi</option><option value="Tamil">üî¥ Tamil</option><option value="Telugu">üü¢ Telugu</option><option value="Bengali">üü£ Bengali</option><option value="Kannada">üü° Kannada</option><option value="Punjabi">üü§ Punjabi</option></select>
      <label>Output Language:</label>
      <select class="lsel" id="ol"><option value="English">üá¨üáß English</option><option value="Hindi">üáÆüá≥ Hindi</option><option value="Gujarati">üü† Gujarati</option><option value="Marathi">üîµ Marathi</option><option value="Tamil">üî¥ Tamil</option><option value="Telugu">üü¢ Telugu</option><option value="Bengali">üü£ Bengali</option><option value="Kannada">üü° Kannada</option><option value="Punjabi">üü§ Punjabi</option></select>
      <span class="lnote">üí° AI will respond in your selected output language</span>
    </div>

    <!-- MODULE 0 WELCOME -->
    <div class="mod active" id="mod0">
      <div class="wlc">
        <div class="wbdg">üï∑Ô∏è K Spider AI Tool ¬∑ By Gaurang Raval &amp; Khush Raval</div>
        <h1 class="wttl">Your AI <span class="hl">Business</span> Consultant</h1>
        <p class="wsub">8 AI-powered modules. Idea validation to investor pitch decks. Complete business intelligence in minutes ‚Äî made for India.</p>
        <div class="wg">
          <div class="wc" onclick="gm(1)"><span class="wi">üí°</span><div class="wn">Idea Validator</div></div>
          <div class="wc" onclick="gm(2)"><span class="wi">üìä</span><div class="wn">Market Research</div></div>
          <div class="wc" onclick="gm(3)"><span class="wi">‚ú®</span><div class="wn">Brand Names</div></div>
          <div class="wc" onclick="gm(4)"><span class="wi">üìã</span><div class="wn">Business Plan</div></div>
          <div class="wc" onclick="gm(5)"><span class="wi">üí∞</span><div class="wn">Pricing Strategy</div></div>
          <div class="wc" onclick="gm(6)"><span class="wi">üìà</span><div class="wn">Financials</div></div>
          <div class="wc" onclick="gm(7)"><span class="wi">üéØ</span><div class="wn">Pitch Deck</div></div>
          <div class="wc" onclick="gm(8)"><span class="wi">‚öñÔ∏è</span><div class="wn">Legal Check</div></div>
        </div>
        <button class="wst" onclick="gm(1)">‚ö° Start with Idea Validator ‚Üí</button>
        <p style="margin-top:12px;font-size:.69rem;color:var(--t4)">www.kspiderai.in ¬∑ By Gaurang Raval &amp; Khush Raval ¬∑ K Spider for Kreation</p>
      </div>
    </div>

    <!-- MODULE 1: Idea Validator -->
    <div class="mod" id="mod1">
      <div class="mhd"><div><div class="mey">Module 1 ¬∑ Free</div><h2 class="mttl">Business <span class="hl">Idea</span> Validator</h2><p class="msub">Viability score, SWOT analysis &amp; clear go/no-go recommendation.</p></div><div class="mic">üí°</div></div>
      <div class="alert aw"><span class="aicon">‚ö†Ô∏è</span>AI analysis is for educational purposes. Validate with real market research and professionals before investing.</div>
      <div id="iv-f">
        <div class="gf">
          <div class="fg"><label>Your Business Idea *</label><textarea id="iv-i" rows="4" placeholder="Describe your idea in detail ‚Äî the more you share, the better the AI analysis..."></textarea></div>
          <div class="g2"><div class="fg"><label>Target City / Region</label><input type="text" id="iv-c" placeholder="e.g. Surat, Gujarat"></div><div class="fg"><label>Industry</label><select id="iv-ind"><option>Food &amp; Beverage</option><option>Technology / SaaS</option><option>Retail / E-Commerce</option><option>Education &amp; EdTech</option><option>Healthcare</option><option>Finance &amp; FinTech</option><option>Manufacturing</option><option>Agriculture</option><option>Real Estate</option><option>Media &amp; Entertainment</option><option>Logistics</option><option>Fashion</option><option>Travel &amp; Tourism</option><option>Professional Services</option><option>Other</option></select></div></div>
          <div class="g2"><div class="fg"><label>Initial Budget</label><select id="iv-b"><option>Under ‚Çπ50,000</option><option>‚Çπ50K ‚Äì ‚Çπ2 Lakh</option><option selected>‚Çπ2L ‚Äì ‚Çπ10 Lakh</option><option>‚Çπ10L ‚Äì ‚Çπ50 Lakh</option><option>‚Çπ50L ‚Äì ‚Çπ1 Crore</option><option>Above ‚Çπ1 Crore</option></select></div><div class="fg"><label>Your Experience</label><select id="iv-e"><option>First-time entrepreneur</option><option>Some business experience</option><option>Industry experience 5+ yrs</option><option>Serial entrepreneur</option></select></div></div>
          <div class="fg"><label>Biggest Concern</label><input type="text" id="iv-con" placeholder="e.g. High competition, finding customers, funding..."></div>
        </div>
        <div class="srow"><button class="bgen" onclick="rm('iv')">üí° Validate My Idea</button><span class="bht">15‚Äì30 sec ¬∑ Claude AI</span></div>
      </div>
      <div class="ldst" id="iv-ld"><div class="ldo"></div><div class="ldt">Analysing Your Idea...</div><div class="ldss"><div class="lds act" id="ivs1"><div class="ldd"></div>Evaluating market opportunity</div><div class="lds" id="ivs2"><div class="ldd"></div>Running SWOT analysis</div><div class="lds" id="ivs3"><div class="ldd"></div>Calculating viability score</div><div class="lds" id="ivs4"><div class="ldd"></div>Writing recommendations</div></div></div>
      <div class="rp" id="iv-r"><div class="rt"><div class="rtl"><span class="rtbdg">‚úÖ Done</span><span class="rttl">Idea Validation Report</span></div><div class="rtr"><button class="rb rbc" onclick="cp('iv-rb')">üìã Copy</button><button class="rb rbp" onclick="mpdf('iv','Idea Validation Report')">üìÑ PDF</button><button class="rb rbw" onclick="wa('iv','Idea Validation')">üì§ WhatsApp</button><button class="rb rbn" onclick="rsm('iv')">‚Ü∫ New</button></div></div><div class="rc" id="iv-rb"></div><div id="iv-br"></div></div>
    </div>

    <!-- MODULE 2: Market Research -->
    <div class="mod" id="mod2">
      <div class="mhd"><div><div class="mey">Module 2 ¬∑ Pro</div><h2 class="mttl"><span class="hl">Market</span> Research</h2><p class="msub">TAM/SAM/SOM, 3 customer personas, competitor landscape &amp; GTM strategy.</p></div><div class="mic">üìä</div></div>
      <div id="mr-f">
        <div class="gf">
          <div class="g2"><div class="fg"><label>Business / Product Name</label><input type="text" id="mr-b" placeholder="e.g. TastyHome"></div><div class="fg"><label>Industry</label><select id="mr-i"><option>Food &amp; Beverage</option><option>Technology / SaaS</option><option>Retail / E-Commerce</option><option>Education &amp; EdTech</option><option>Healthcare</option><option>Finance &amp; FinTech</option><option>Manufacturing</option><option>Agriculture</option><option>Real Estate</option><option>Other</option></select></div></div>
          <div class="g2"><div class="fg"><label>Target Geography</label><input type="text" id="mr-g" placeholder="e.g. Tier-2 cities in Gujarat"></div><div class="fg"><label>Target Age Group</label><select id="mr-a"><option>13‚Äì18 (Teens)</option><option>18‚Äì25</option><option>25‚Äì35 (Millennials)</option><option>35‚Äì50 (Gen X)</option><option>50+</option><option>All ages</option></select></div></div>
          <div class="fg"><label>Product / Service Description *</label><textarea id="mr-p" rows="3" placeholder="What are you selling and what problem does it solve?"></textarea></div>
          <div class="g2"><div class="fg"><label>Known Competitors</label><input type="text" id="mr-c" placeholder="e.g. Zomato, local tiffin services..."></div><div class="fg"><label>Your Unique Advantage</label><input type="text" id="mr-u" placeholder="e.g. Authentic home-style food, same-day delivery"></div></div>
        </div>
        <div class="srow"><button class="bgen" onclick="rm('mr')">üìä Generate Research</button><span class="bht">20‚Äì40 sec</span></div>
      </div>
      <div class="ldst" id="mr-ld"><div class="ldo"></div><div class="ldt">Researching Your Market...</div><div class="ldss"><div class="lds act"><div class="ldd"></div>Estimating TAM/SAM/SOM</div><div class="lds"><div class="ldd"></div>Building personas</div><div class="lds"><div class="ldd"></div>Mapping competitors</div><div class="lds"><div class="ldd"></div>Crafting GTM strategy</div></div></div>
      <div class="rp" id="mr-r"><div class="rt"><div class="rtl"><span class="rtbdg">‚úÖ Done</span><span class="rttl">Market Research Report</span></div><div class="rtr"><button class="rb rbc" onclick="cp('mr-rb')">üìã Copy</button><button class="rb rbp" onclick="mpdf('mr','Market Research Report')">üìÑ PDF</button><button class="rb rbw" onclick="wa('mr','Market Research')">üì§ WhatsApp</button><button class="rb rbn" onclick="rsm('mr')">‚Ü∫ New</button></div></div><div class="rc" id="mr-rb"></div><div id="mr-br"></div></div>
    </div>

    <!-- MODULE 3: Brand Names -->
    <div class="mod" id="mod3">
      <div class="mhd"><div><div class="mey">Module 3 ¬∑ Pro</div><h2 class="mttl">Brand <span class="hl">Name</span> Studio</h2><p class="msub">8 unique names with taglines, brand colours, domain tips &amp; naming rationale.</p></div><div class="mic">‚ú®</div></div>
      <div id="bn-f">
        <div class="gf">
          <div class="g2"><div class="fg"><label>Industry / Business Type *</label><input type="text" id="bn-i" placeholder="e.g. Home food delivery, EdTech startup"></div><div class="fg"><label>Language Feel</label><select id="bn-l"><option>English only</option><option>Hindi + English mix</option><option>Gujarati + English mix</option><option>Sanskrit-inspired</option><option>Pure Indian</option><option>International / Global</option></select></div></div>
          <div class="fg"><label>Keywords / Values</label><input type="text" id="bn-k" placeholder="e.g. fresh, home, trust, fast, premium..."></div>
          <div class="g2"><div class="fg"><label>Target Audience</label><input type="text" id="bn-a" placeholder="e.g. Working professionals 25‚Äì40"></div><div class="fg"><label>Brand Personality</label><select id="bn-p"><option>Friendly &amp; Warm</option><option>Professional &amp; Trustworthy</option><option>Bold &amp; Energetic</option><option>Luxury &amp; Premium</option><option>Fun &amp; Playful</option><option>Minimal &amp; Modern</option><option>Traditional &amp; Cultural</option></select></div></div>
          <div class="fg"><label>Names to Avoid</label><input type="text" id="bn-av" placeholder="Words or styles you don't want..."></div>
        </div>
        <div class="srow"><button class="bgen" onclick="rm('bn')">‚ú® Generate Brand Names</button><span class="bht">8 unique names with analysis</span></div>
      </div>
      <div class="ldst" id="bn-ld"><div class="ldo"></div><div class="ldt">Creating Brand Identity...</div><div class="ldss"><div class="lds act"><div class="ldd"></div>Brainstorming concepts</div><div class="lds"><div class="ldd"></div>Analysing phonetics</div><div class="lds"><div class="ldd"></div>Generating taglines</div><div class="lds"><div class="ldd"></div>Colour psychology</div></div></div>
      <div class="rp" id="bn-r"><div class="rt"><div class="rtl"><span class="rtbdg">‚úÖ Done</span><span class="rttl">Brand Name Studio</span></div><div class="rtr"><button class="rb rbc" onclick="cp('bn-rb')">üìã Copy</button><button class="rb rbp" onclick="mpdf('bn','Brand Name Studio')">üìÑ PDF</button><button class="rb rbn" onclick="rsm('bn')">‚Ü∫ New</button></div></div><div class="rc" id="bn-rb"></div><div id="bn-br"></div></div>
    </div>

    <!-- MODULE 4: Business Plan -->
    <div class="mod" id="mod4">
      <div class="mhd"><div><div class="mey">Module 4 ¬∑ Pro</div><h2 class="mttl">Business <span class="hl">Plan</span> Builder</h2><p class="msub">Executive summary, revenue model, cost structure &amp; 12-month roadmap.</p></div><div class="mic">üìã</div></div>
      <div id="bp-f">
        <div class="gf">
          <div class="g2"><div class="fg"><label>Business Name</label><input type="text" id="bp-n" placeholder="Your business name"></div><div class="fg"><label>Business Structure</label><select id="bp-s"><option>Sole Proprietorship</option><option>Partnership</option><option>Private Limited (Pvt Ltd)</option><option>LLP</option><option>OPC</option><option>NGO / Trust</option></select></div></div>
          <div class="fg"><label>What does your business do? *</label><textarea id="bp-d" rows="3" placeholder="Products/services, how you earn, who your customers are..."></textarea></div>
          <div class="g3"><div class="fg"><label>Monthly Revenue Goal (‚Çπ)</label><input type="text" id="bp-r" placeholder="e.g. 2,00,000"></div><div class="fg"><label>Launch City</label><input type="text" id="bp-c" placeholder="e.g. Surat, Gujarat"></div><div class="fg"><label>Team Size</label><select id="bp-t"><option>Just me</option><option>2‚Äì5 people</option><option>5‚Äì10</option><option>10‚Äì25</option><option>25+</option></select></div></div>
          <div class="fg"><label>Key Goals for Year 1</label><input type="text" id="bp-g" placeholder="e.g. 500 customers, ‚Çπ50L revenue, expand to 3 cities..."></div>
        </div>
        <div class="srow"><button class="bgen" onclick="rm('bp')">üìã Build Business Plan</button><span class="bht">30‚Äì60 sec</span></div>
      </div>
      <div class="ldst" id="bp-ld"><div class="ldo"></div><div class="ldt">Writing Business Plan...</div><div class="ldss"><div class="lds act"><div class="ldd"></div>Drafting executive summary</div><div class="lds"><div class="ldd"></div>Mapping revenue model</div><div class="lds"><div class="ldd"></div>Building cost structure</div><div class="lds"><div class="ldd"></div>Creating 12-month roadmap</div></div></div>
      <div class="rp" id="bp-r"><div class="rt"><div class="rtl"><span class="rtbdg">‚úÖ Done</span><span class="rttl">Business Plan</span></div><div class="rtr"><button class="rb rbc" onclick="cp('bp-rb')">üìã Copy</button><button class="rb rbp" onclick="mpdf('bp','Business Plan')">üìÑ PDF</button><button class="rb rbw" onclick="wa('bp','Business Plan')">üì§ WhatsApp</button><button class="rb rbn" onclick="rsm('bp')">‚Ü∫ New</button></div></div><div class="rc" id="bp-rb"></div><div id="bp-br"></div></div>
    </div>

    <!-- MODULE 5: Pricing -->
    <div class="mod" id="mod5">
      <div class="mhd"><div><div class="mey">Module 5 ¬∑ Pro</div><h2 class="mttl"><span class="hl">Pricing</span> Strategy</h2><p class="msub">3 pricing models, recommended price, upsell architecture &amp; psychological tips.</p></div><div class="mic">üí∞</div></div>
      <div id="ps-f">
        <div class="gf">
          <div class="fg"><label>Product / Service *</label><textarea id="ps-p" rows="3" placeholder="What are you selling and what value does it provide?"></textarea></div>
          <div class="g3"><div class="fg"><label>Your Cost per Unit (‚Çπ)</label><input type="text" id="ps-c" placeholder="e.g. 150"></div><div class="fg"><label>Target Customer Income</label><select id="ps-i"><option>Low (under ‚Çπ20K/mo)</option><option>Lower middle (‚Çπ20K‚Äì40K)</option><option>Middle class (‚Çπ40K‚Äì1L)</option><option>Upper middle (‚Çπ1L‚Äì3L)</option><option>Premium / HNI (‚Çπ3L+)</option></select></div><div class="fg"><label>Competitor Price Range</label><input type="text" id="ps-cp" placeholder="e.g. ‚Çπ100‚Äì‚Çπ300"></div></div>
          <div class="fg"><label>Pricing Models (select)</label><div class="chips" id="ps-ch"><div class="chip" onclick="tc(this)">One-time purchase</div><div class="chip" onclick="tc(this)">Subscription / Monthly</div><div class="chip" onclick="tc(this)">Per use</div><div class="chip" onclick="tc(this)">Freemium</div><div class="chip" onclick="tc(this)">Bundle / Package</div><div class="chip" onclick="tc(this)">Tiered pricing</div></div></div>
          <div class="fg"><label>Pricing Goal</label><select id="ps-g"><option>Maximise volume / market share</option><option>Maximise profit margin</option><option>Beat competitors on price</option><option>Position as premium brand</option><option>Rapid customer acquisition</option></select></div>
        </div>
        <div class="srow"><button class="bgen" onclick="rm('ps')">üí∞ Build Pricing Strategy</button></div>
      </div>
      <div class="ldst" id="ps-ld"><div class="ldo"></div><div class="ldt">Building Pricing Strategy...</div><div class="ldss"><div class="lds act"><div class="ldd"></div>Cost-plus pricing</div><div class="lds"><div class="ldd"></div>Value-based pricing</div><div class="lds"><div class="ldd"></div>Competitive analysis</div><div class="lds"><div class="ldd"></div>Upsell architecture</div></div></div>
      <div class="rp" id="ps-r"><div class="rt"><div class="rtl"><span class="rtbdg">‚úÖ Done</span><span class="rttl">Pricing Strategy</span></div><div class="rtr"><button class="rb rbc" onclick="cp('ps-rb')">üìã Copy</button><button class="rb rbp" onclick="mpdf('ps','Pricing Strategy')">üìÑ PDF</button><button class="rb rbn" onclick="rsm('ps')">‚Ü∫ New</button></div></div><div class="rc" id="ps-rb"></div><div id="ps-br"></div></div>
    </div>

    <!-- MODULE 6: Financials -->
    <div class="mod" id="mod6">
      <div class="mhd"><div><div class="mey">Module 6 ¬∑ Pro</div><h2 class="mttl">Financial <span class="hl">Projections</span></h2><p class="msub">Break-even analysis, 12-month P&amp;L, cash flow &amp; ROI estimate.</p></div><div class="mic">üìà</div></div>
      <div class="alert aw"><span class="aicon">‚ö†Ô∏è</span>Estimates for planning only. Consult a CA for investment decisions.</div>
      <div id="fp-f">
        <div class="gf">
          <div class="g2"><div class="fg"><label>Business Name</label><input type="text" id="fp-n" placeholder="Your business name"></div><div class="fg"><label>Business Model</label><select id="fp-m"><option>Product sales</option><option>Service-based</option><option>Subscription</option><option>Marketplace</option><option>Freemium</option><option>Manufacturing</option></select></div></div>
          <div class="g3"><div class="fg"><label>Avg Revenue per Customer (‚Çπ/mo)</label><input type="text" id="fp-ar" placeholder="e.g. 500"></div><div class="fg"><label>Customers in Month 1</label><input type="text" id="fp-cu" placeholder="e.g. 50"></div><div class="fg"><label>Monthly Growth Rate (%)</label><div class="rw"><span class="rv" id="fp-gv">15%</span><input type="range" id="fp-gr" min="5" max="50" value="15" oninput="document.getElementById('fp-gv').textContent=this.value+'%'"></div></div></div>
          <div class="g3"><div class="fg"><label>Fixed Monthly Costs (‚Çπ)</label><input type="text" id="fp-fc" placeholder="e.g. 40,000"></div><div class="fg"><label>Variable Cost per Customer (‚Çπ)</label><input type="text" id="fp-vc" placeholder="e.g. 200"></div><div class="fg"><label>Initial Investment (‚Çπ)</label><input type="text" id="fp-iv" placeholder="e.g. 5,00,000"></div></div>
        </div>
        <div class="srow"><button class="bgen" onclick="rm('fp')">üìà Generate Projections</button></div>
      </div>
      <div class="ldst" id="fp-ld"><div class="ldo"></div><div class="ldt">Running Financial Models...</div><div class="ldss"><div class="lds act"><div class="ldd"></div>Calculating break-even</div><div class="lds"><div class="ldd"></div>Projecting 12-month revenue</div><div class="lds"><div class="ldd"></div>Modelling cash flow</div><div class="lds"><div class="ldd"></div>Computing ROI</div></div></div>
      <div class="rp" id="fp-r"><div class="rt"><div class="rtl"><span class="rtbdg">‚úÖ Done</span><span class="rttl">Financial Projections</span></div><div class="rtr"><button class="rb rbc" onclick="cp('fp-rb')">üìã Copy</button><button class="rb rbp" onclick="mpdf('fp','Financial Projections')">üìÑ PDF</button><button class="rb rbn" onclick="rsm('fp')">‚Ü∫ New</button></div></div><div class="rc" id="fp-rb"></div><div id="fp-br"></div></div>
    </div>

    <!-- MODULE 7: Pitch Deck -->
    <div class="mod" id="mod7">
      <div class="mhd"><div><div class="mey">Module 7 ¬∑ Pro</div><h2 class="mttl">Pitch Deck <span class="hl">Outline</span></h2><p class="msub">10-slide investor pitch with talking points, hook &amp; funding strategy.</p></div><div class="mic">üéØ</div></div>
      <div id="pd-f">
        <div class="gf">
          <div class="g2"><div class="fg"><label>Company Name</label><input type="text" id="pd-co" placeholder="Your company name"></div><div class="fg"><label>Funding Stage</label><select id="pd-st"><option>Pre-seed</option><option>Seed</option><option>Series A</option><option>Angel investment</option><option>Bank loan</option><option>Government grant</option></select></div></div>
          <div class="fg"><label>One-line Business Description *</label><input type="text" id="pd-on" placeholder="e.g. We help home cooks monetise their kitchen by connecting them to nearby customers."></div>
          <div class="g3"><div class="fg"><label>Problem You Solve</label><input type="text" id="pd-pr" placeholder="What pain exists?"></div><div class="fg"><label>Your Solution</label><input type="text" id="pd-so" placeholder="How do you solve it?"></div><div class="fg"><label>Funding Ask (‚Çπ)</label><input type="text" id="pd-as" placeholder="e.g. 50,00,000"></div></div>
          <div class="g2"><div class="fg"><label>Current Traction</label><input type="text" id="pd-tr" placeholder="e.g. 200 users, ‚Çπ5L revenue..."></div><div class="fg"><label>Use of Funds</label><input type="text" id="pd-uf" placeholder="e.g. 40% tech, 30% marketing, 30% team..."></div></div>
        </div>
        <div class="srow"><button class="bgen" onclick="rm('pd')">üéØ Generate Pitch Deck</button></div>
      </div>
      <div class="ldst" id="pd-ld"><div class="ldo"></div><div class="ldt">Crafting Your Pitch...</div><div class="ldss"><div class="lds act"><div class="ldd"></div>Writing investor hook</div><div class="lds"><div class="ldd"></div>Building narrative</div><div class="lds"><div class="ldd"></div>Structuring 10 slides</div><div class="lds"><div class="ldd"></div>Writing talking points</div></div></div>
      <div class="rp" id="pd-r"><div class="rt"><div class="rtl"><span class="rtbdg">‚úÖ Done</span><span class="rttl">Pitch Deck Outline</span></div><div class="rtr"><button class="rb rbc" onclick="cp('pd-rb')">üìã Copy</button><button class="rb rbp" onclick="mpdf('pd','Pitch Deck Outline')">üìÑ PDF</button><button class="rb rbw" onclick="wa('pd','Pitch Deck')">üì§ WhatsApp</button><button class="rb rbn" onclick="rsm('pd')">‚Ü∫ New</button></div></div><div class="rc" id="pd-rb"></div><div id="pd-br"></div></div>
    </div>

    <!-- MODULE 8: Legal -->
    <div class="mod" id="mod8">
      <div class="mhd"><div><div class="mey">Module 8 ¬∑ Pro</div><h2 class="mttl">Legal <span class="hl">Checklist</span></h2><p class="msub">Required registrations, licences, compliance timeline &amp; cost estimates.</p></div><div class="mic">‚öñÔ∏è</div></div>
      <div class="alert aw"><span class="aicon">‚ö†Ô∏è</span>For guidance only. Always consult a qualified CA or lawyer.</div>
      <div id="lc-f">
        <div class="gf">
          <div class="g2"><div class="fg"><label>Business Type / Industry *</label><input type="text" id="lc-b" placeholder="e.g. Home food delivery, IT services..."></div><div class="fg"><label>Business Structure</label><select id="lc-s"><option>Sole Proprietorship</option><option>Partnership Firm</option><option>Private Limited (Pvt Ltd)</option><option>LLP</option><option>OPC</option><option>Section 8 Company (NGO)</option><option>Trust / Society</option></select></div></div>
          <div class="g2"><div class="fg"><label>State of Operation</label><select id="lc-st"><option>Gujarat</option><option>Maharashtra</option><option>Delhi</option><option>Karnataka</option><option>Tamil Nadu</option><option>Rajasthan</option><option>Uttar Pradesh</option><option>West Bengal</option><option>Telangana</option><option>Kerala</option><option>Punjab</option><option>Haryana</option><option>Madhya Pradesh</option><option>Other</option></select></div><div class="fg"><label>Expected Annual Revenue</label><select id="lc-r"><option>Under ‚Çπ20 Lakh</option><option>‚Çπ20‚Äì40 Lakh</option><option>‚Çπ40L ‚Äì ‚Çπ1 Crore</option><option>Above ‚Çπ1 Crore</option></select></div></div>
          <div class="fg"><label>Special Categories (select)</label><div class="chips" id="lc-ch"><div class="chip" onclick="tc(this)">Food / Restaurant</div><div class="chip" onclick="tc(this)">Export / Import</div><div class="chip" onclick="tc(this)">Online / E-Commerce</div><div class="chip" onclick="tc(this)">Healthcare / Medical</div><div class="chip" onclick="tc(this)">Education / Coaching</div><div class="chip" onclick="tc(this)">Finance / Lending</div><div class="chip" onclick="tc(this)">Manufacturing</div></div></div>
        </div>
        <div class="srow"><button class="bgen" onclick="rm('lc')">‚öñÔ∏è Generate Legal Checklist</button></div>
      </div>
      <div class="ldst" id="lc-ld"><div class="ldo"></div><div class="ldt">Checking Legal Requirements...</div><div class="ldss"><div class="lds act"><div class="ldd"></div>Identifying registrations</div><div class="lds"><div class="ldd"></div>State-specific licences</div><div class="lds"><div class="ldd"></div>Compliance costs</div><div class="lds"><div class="ldd"></div>Building timeline</div></div></div>
      <div class="rp" id="lc-r"><div class="rt"><div class="rtl"><span class="rtbdg">‚úÖ Done</span><span class="rttl">Legal &amp; Compliance Checklist</span></div><div class="rtr"><button class="rb rbc" onclick="cp('lc-rb')">üìã Copy</button><button class="rb rbp" onclick="mpdf('lc','Legal Checklist')">üìÑ PDF</button><button class="rb rbn" onclick="rsm('lc')">‚Ü∫ New</button></div></div><div class="rc" id="lc-rb"></div><div id="lc-br"></div></div>
    </div>

  </main>
</div>

<script>
/* K Spider AI Business Consultant v2 ‚Äî Complete JS */
var KS={site:'https://www.kspiderai.in',tool:'https://www.kspiderai.in/tools/ai-business-consultant.html',wan:'',yt1:'https://www.youtube.com/@KSpider4Kreation',yt2:'https://www.youtube.com/@DoctorShreyanshRaval',yt3:'https://youtube.com/@swarseishwartak',founders:'Gaurang Raval & Khush Raval',co:'K Spider for Kreation'};
var DONE={};

function gm(n){document.querySelectorAll('.mod').forEach(function(m){m.classList.remove('active')});document.querySelectorAll('.sbitem').forEach(function(s){s.classList.remove('active')});var m=document.getElementById('mod'+n),s=document.getElementById('sb'+n);if(m)m.classList.add('active');if(s)s.classList.add('active');window.scrollTo({top:0,behavior:'smooth'})}
function gl(){return{i:document.getElementById('il').value||'English',o:document.getElementById('ol').value||'English'}}
function linstr(){
  var l=gl();
  if(l.o==='English') return '';
  return 'OUTPUT LANGUAGE REQUIREMENT: Write every text value in '+l.o+' script/language. JSON keys remain in English. All descriptions, advice, labels, summaries must be in '+l.o+'.\n\n';
}
function getSysPrompt(){
  var l=gl();
  var base='You are an expert Indian business consultant with 20+ years experience. Always provide India-specific practical advice with INR amounts. Return ONLY valid JSON, no markdown fences, no extra text.';
  if(l.o!=='English'){
    base+=' CRITICAL LANGUAGE RULE: You MUST write every single JSON string value in '+l.o+' language. JSON keys stay in English but ALL content, descriptions, advice, names, labels, summaries ‚Äî everything ‚Äî must be in '+l.o+'. Do not use English for any content value.';
  }
  return base;
}
function tc(el){el.classList.toggle('sel')}
function gch(id){return Array.from(document.querySelectorAll('#'+id+' .chip.sel')).map(function(c){return c.textContent.trim()}).join(', ')}
function toast(msg,type){var tw=document.getElementById('tw'),el=document.createElement('div');el.className='ti '+(type==='s'?'ts':type==='e'?'te':type==='w'?'tw2':'tip');el.innerHTML='<span>'+msg+'</span>';tw.appendChild(el);setTimeout(function(){el.style.transition='opacity .26s';el.style.opacity='0';setTimeout(function(){el.remove()},300)},3800)}
function shl(k){var f=document.getElementById(k+'-f'),ld=document.getElementById(k+'-ld'),r=document.getElementById(k+'-r');if(f)f.style.display='none';if(ld)ld.classList.add('show');if(r)r.classList.remove('show')}
function shr(k){var ld=document.getElementById(k+'-ld'),r=document.getElementById(k+'-r');if(ld)ld.classList.remove('show');if(r)r.classList.add('show')}
function rsm(k){var f=document.getElementById(k+'-f'),ld=document.getElementById(k+'-ld'),r=document.getElementById(k+'-r');if(f)f.style.display='';if(ld)ld.classList.remove('show');if(r)r.classList.remove('show')}
function sa(ids){var i=0;var iv=setInterval(function(){if(i<ids.length){var el=document.getElementById(ids[i]);if(i>0){var prev=document.getElementById(ids[i-1]);if(prev){prev.classList.remove('act');prev.classList.add('done')}}if(el)el.classList.add('act');i++}else clearInterval(iv)},2000)}
function md(n){DONE[n]=true;var btn=document.getElementById('sb'+n),num=document.getElementById('sbn'+n);if(btn)btn.classList.add('done');if(num)num.textContent='‚úì';if(Object.keys(DONE).length>=3){var p=document.getElementById('pdf-btn');if(p)p.disabled=false}}

function brf(mod){
  return '<div class="brf">'+
    '<div class="brf-top">'+
      '<div class="bflr"><div class="bflo">üï∑Ô∏è</div><div class="bfbn">K Spider <span>AI Tool</span></div></div>'+
      '<a href="'+KS.site+'" target="_blank" class="bfurl">üåê kspiderai.in</a>'+
    '</div>'+
    '<div class="brf-chs">'+
      '<a href="'+KS.yt1+'" target="_blank" class="bfch"><div class="bfci">‚ñ∂</div><div><div class="bfcn">K Spider for Kreation</div><span class="bfcns">AI Tools ¬∑ Tech ¬∑ Marketing</span></div></a>'+
      '<a href="'+KS.yt2+'" target="_blank" class="bfch"><div class="bfci" style="background:#e53935">‚öïÔ∏è</div><div><div class="bfcn">Doctor Shreyansh Raval</div><span class="bfcns">Health ¬∑ NEET Prep</span></div></a>'+
      '<a href="'+KS.yt3+'" target="_blank" class="bfch"><div class="bfci" style="background:#7c3aed">üéµ</div><div><div class="bfcn">SwarSeIshwarTak</div><span class="bfcns">Music ¬∑ Spiritual</span></div></a>'+

    '</div>'+
    '<div class="bfdisc">'+mod+' generated by K Spider AI Business Consultant ¬∑ kspiderai.in ¬∑ By '+KS.founders+' ('+KS.co+') ¬∑ Educational use only ‚Äî verify with qualified professionals. AI may make errors.</div>'+
    '</div>';
}

async function apiCall(sys,msg,tokens,attempt){
  tokens=tokens||3000; attempt=attempt||1;
  var res=await fetch('https://api.anthropic.com/v1/messages',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:tokens,system:sys,messages:[{role:'user',content:msg}]})});
  if(res.status===429||res.status===529){
    if(attempt>=3)throw new Error('Server busy (429). Please wait 30 seconds and try again.');
    var wait=attempt*8000;
    toast('Server busy ‚Äî retrying in '+(wait/1000)+'s (attempt '+attempt+'/3)...','w');
    await new Promise(function(r){setTimeout(r,wait)});
    return apiCall(sys,msg,tokens,attempt+1);
  }
  if(res.status===401)throw new Error('API key error (401). Please check your Anthropic API key.');
  if(!res.ok){var et=await res.text().catch(function(){return''});throw new Error('API error '+res.status+(et?' ‚Äî '+et.slice(0,80):''));}
  var d=await res.json();
  return(d.content&&d.content[0]&&d.content[0].text)?d.content[0].text:'';
}
function parseJSON(txt){
  var m=txt.match(/```json\s*([\s\S]*?)```/)||txt.match(/```\s*([\s\S]*?)```/);
  var raw=m?m[1]:txt;
  try{return JSON.parse(raw.trim())}catch(e){return{raw:txt}}
}
// Language name map ‚Äî use native script names for better AI translation accuracy
var LANG_MAP={
  'Hindi':'Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)',
  'Gujarati':'Gujarati (‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä)',
  'Marathi':'Marathi (‡§Æ‡§∞‡§æ‡§†‡•Ä)',
  'Tamil':'Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)',
  'Telugu':'Telugu (‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å)',
  'Bengali':'Bengali (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ)',
  'Kannada':'Kannada (‡≤ï‡≤®‡≥ç‡≤®‡≤°)',
  'Punjabi':'Punjabi (‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä)'
};
async function translateBatch(vals,langName){
  var sys='You are a professional translator specializing in Indian languages. Translate the given JSON string array into '+langName+'. Rules: (1) Return ONLY a valid JSON array, same length as input. (2) Keep numbers, INR amounts, URLs, emojis, and proper nouns unchanged. (3) Use natural fluent '+langName+' ‚Äî not literal translation. (4) No markdown, no explanation, no extra text.';
  var msg='Translate into '+langName+':\n'+JSON.stringify(vals);
  // apiCall already has 429 retry built in (3 attempts with 8s/16s/24s backoff)
  var txt=await apiCall(sys,msg,2500);
  var result=parseJSON(txt);
  if(Array.isArray(result)&&result.length===vals.length) return result;
  return vals;
}
async function translateObj(obj,lang){
  var langName=LANG_MAP[lang]||lang;
  // Collect all string values with their paths
  var paths=[],vals=[];
  function collect(o,path){
    if(typeof o==='string'&&o.length>1&&!/^#[0-9a-fA-F]{3,6}$/.test(o)&&!/^https?:/.test(o)&&!/^‚Çπ/.test(o)){
      paths.push(path);vals.push(o);
    }else if(Array.isArray(o)){o.forEach(function(v,i){collect(v,path+'['+i+']')});}
    else if(o&&typeof o==='object'){Object.keys(o).forEach(function(k){collect(o[k],path?path+'.'+k:k)});}
  }
  collect(obj,'');
  if(!vals.length)return obj;
  // Split into batches of 12 to avoid token limits
  var BATCH=12;
  var translated=[];
  var batches=Math.ceil(vals.length/BATCH);
  for(var b=0;b<batches;b++){
    var slice=vals.slice(b*BATCH,(b+1)*BATCH);
    try{
      var result=await translateBatch(slice,langName);
      translated=translated.concat(result);
    }catch(e){
      if(e.message&&e.message.indexOf('429')>=0){
        // 429 already retried 3x by apiCall ‚Äî wait extra then try once more
        toast('Rate limit hit during translation. Waiting 20s before continuing...','w');
        await new Promise(function(r){setTimeout(r,20000)});
        try{
          var retry=await translateBatch(slice,langName);
          translated=translated.concat(retry);
        }catch(e2){translated=translated.concat(slice);}
      }else{
        console.warn('Batch '+b+' failed:',e);
        translated=translated.concat(slice);
      }
    }
  }
  // Put translated values back into object
  var i=0;
  function apply(o){
    if(typeof o==='string'&&o.length>1&&!/^#[0-9a-fA-F]{3,6}$/.test(o)&&!/^https?:/.test(o)&&!/^‚Çπ/.test(o)){
      return (translated[i]!==undefined)?translated[i++]:o;
    }
    if(Array.isArray(o)){return o.map(function(v){return apply(v)});}
    if(o&&typeof o==='object'){var r={};Object.keys(o).forEach(function(k){r[k]=apply(o[k])});return r;}
    return o;
  }
  return apply(obj);
}
async function ai(p){
  var l=gl();
  var sys='You are an expert Indian business consultant with 20+ years experience. Always provide India-specific practical advice with INR amounts. Return ONLY valid JSON, no markdown fences, no extra text.';
  var txt=await apiCall(sys,p,3000);
  var result=parseJSON(txt);
  // If non-English output selected, translate the result object
  if(l.o!=='English'&&!result.raw){
    var langLabel=LANG_MAP[l.o]||l.o;
    toast('Translating to '+langLabel+'... (may take 15-30 sec)','tip');
    result=await translateObj(result,l.o);
    toast('Translation complete!','s');
  }
  return result;
}

function rm(k){var fns={iv:iv,mr:mr,bn:bn,bp:bp,ps:ps,fp:fp,pd:pd,lc:lc};if(fns[k])fns[k]().catch(function(err){rsm(k);toast('Error: '+(err.message||'Please try again.'),'e');console.error(err)})}

/* HTML helpers */
function tli(lbl,txt){return'<div class="tli"><div class="tlm"><div class="tld"></div><div class="tll"></div></div><div class="tlb">'+(lbl?'<div class="tllb">'+lbl+'</div>':'')+'<div class="tlt">'+txt+'</div></div></div>'}
function card(icon,ttl,body){return'<div class="card"><div class="chd"><span class="ci">'+icon+'</span><span class="ct">'+ttl+'</span></div>'+body+'</div>'}
function scring(sc){var r=29,c=2*Math.PI*r,off=c-(sc/100)*c;return'<div class="srng"><svg class="ssvg" width="72" height="72" viewBox="0 0 72 72"><circle class="sbg" cx="36" cy="36" r="'+r+'"/><circle class="sfg" cx="36" cy="36" r="'+r+'" stroke-dasharray="'+c.toFixed(1)+'" stroke-dashoffset="'+off.toFixed(1)+'"/></svg><div class="stxt"><span class="snum">'+sc+'</span><span class="sof">/ 100</span></div></div>'}
function pill(txt,ok){var bg=ok?'var(--grs)':'var(--rds)',col=ok?'var(--gr)':'var(--rd)',bd=ok?'rgba(5,150,105,.22)':'rgba(220,38,38,.22)';return'<span style="padding:3px 11px;border-radius:100px;font-size:.66rem;font-weight:800;background:'+bg+';color:'+col+';border:1px solid '+bd+'">'+txt+'</span>'}

/* 1. IDEA VALIDATOR */
async function iv(){
  var idea=document.getElementById('iv-i').value.trim();
  if(idea.length<15){toast('Please describe your idea in more detail.','w');return}
  shl('iv');sa(['ivs1','ivs2','ivs3','ivs4']);
  var l=gl();
  var p='Business Idea: '+idea+'\nCity: '+(document.getElementById('iv-c').value||'India')+'\nIndustry: '+document.getElementById('iv-ind').value+'\nBudget: '+document.getElementById('iv-b').value+'\nExperience: '+document.getElementById('iv-e').value+'\nConcern: '+(document.getElementById('iv-con').value||'none')+'\nInput language: '+l.i+'\n\nReturn JSON:\n{"score":ACTUAL_SCORE_0_TO_100,"verdict":"YOUR_HONEST_VERDICT_BASED_ON_ANALYSIS","verdict_emoji":"üü¢orüü°orüî¥","go_nogo":"GO_or_NO_GO","go_reason":"specific reason based on this actual business idea","summary":"honest 2-3 sentence assessment of THIS specific idea","strengths":["actual strength 1 of this idea","actual strength 2","actual strength 3","actual strength 4"],"weaknesses":["real weakness 1","real weakness 2","real weakness 3"],"opportunities":["real market opportunity 1","real opportunity 2","real opportunity 3"],"threats":["real competitive threat 1","real threat 2","real threat 3"],"india_context":"specific India market insight relevant to this business","next_steps":["concrete actionable step 1","step 2","step 3","step 4"],"market_potential":"estimated INR market size","competition_level":"Low/Medium/High with reason","time_to_profit":"realistic estimate for this business type","concern_response":"direct answer to the specific concern raised"}';
  var r=await ai(p);
  var sc=r.score||65;
  var b=document.getElementById('iv-rb');
  b.innerHTML='<div class="scr">'+scring(sc)+'<div><div class="sverd">'+(r.verdict_emoji||'')+' '+(r.verdict||'')+'</div><div class="shnt">'+(r.summary||'')+'</div><div style="margin-top:9px;display:flex;gap:7px;flex-wrap:wrap">'+pill(r.go_nogo==='GO'?'‚úÖ GO':'‚õî NO-GO',r.go_nogo==='GO')+'</div></div></div>'+
  '<div class="stg"><div class="stb"><div class="stv">'+(r.market_potential||'‚Äî')+'</div><div class="stk">Market Potential</div></div><div class="stb"><div class="stv">'+(r.competition_level||'‚Äî')+'</div><div class="stk">Competition</div></div><div class="stb"><div class="stv">'+(r.time_to_profit||'‚Äî')+'</div><div class="stk">Time to Profit</div></div></div>'+
  card('üîç','SWOT Analysis','<div class="swg"><div class="swc ss"><span class="swl">Strengths</span><ul class="swul">'+(r.strengths||[]).map(function(s){return'<li>'+s+'</li>'}).join('')+'</ul></div><div class="swc sw"><span class="swl">Weaknesses</span><ul class="swul">'+(r.weaknesses||[]).map(function(s){return'<li>'+s+'</li>'}).join('')+'</ul></div><div class="swc so"><span class="swl">Opportunities</span><ul class="swul">'+(r.opportunities||[]).map(function(s){return'<li>'+s+'</li>'}).join('')+'</ul></div><div class="swc st"><span class="swl">Threats</span><ul class="swul">'+(r.threats||[]).map(function(s){return'<li>'+s+'</li>'}).join('')+'</ul></div></div>')+
  (r.india_context?card('üáÆüá≥','India Market Context','<div class="cbod"><p>'+r.india_context+'</p></div>'):'')+
  (r.concern_response?card('üí¨','Your Concern: Addressed','<div class="cbod"><p>'+r.concern_response+'</p></div>'):'')+
  (r.next_steps&&r.next_steps.length?card('üöÄ','Recommended Next Steps','<div class="tline">'+r.next_steps.map(function(s,i){return tli('Step '+(i+1),s)}).join('')+'</div>'):'')+
  card('üì∫','Learn More on YouTube','<div class="cbod"><p>üï∑Ô∏è Watch AI Business tutorials on our YouTube channels:</p><p>‚ñ∂ <a href="'+KS.yt1+'" target="_blank" style="color:var(--g2)">K Spider for Kreation</a> ‚Äî AI Tools, Tech &amp; Business guides</p><p>‚öïÔ∏è <a href="'+KS.yt2+'" target="_blank" style="color:var(--g2)">Doctor Shreyansh Raval</a> ‚Äî Health &amp; Education</p><p>üéµ <a href="'+KS.yt3+'" target="_blank" style="color:var(--g2)">SwarSeIshwarTak</a> ‚Äî Music &amp; Spiritual</p><p>üåê Free AI tools: <a href="'+KS.site+'" target="_blank" style="color:var(--g2)">'+KS.site+'</a></p></div>');
  document.getElementById('iv-br').innerHTML=brf('Idea Validation Report');
  shr('iv');md(1);toast('Idea validation complete!','s');
}

/* 2. MARKET RESEARCH */
async function mr(){
  var prod=document.getElementById('mr-p').value.trim();
  if(prod.length<12){toast('Please describe your product/service.','w');return}
  shl('mr');
  var l=gl();
  var p='Business: '+(document.getElementById('mr-b').value||'my business')+'\nProduct: '+prod+'\nIndustry: '+document.getElementById('mr-i').value+'\nGeography: '+(document.getElementById('mr-g').value||'India')+'\nAge group: '+document.getElementById('mr-a').value+'\nCompetitors: '+(document.getElementById('mr-c').value||'not specified')+'\nUSP: '+(document.getElementById('mr-u').value||'not specified')+'\n\nReturn JSON:\n{"tam":"REAL estimated total addressable market in INR Crore for this specific industry","sam":"REAL serviceable addressable market for this geography","som":"REAL obtainable market share estimate for this business","market_growth":"actual CAGR for this industry from research","market_summary":"4 sentences of real market analysis for this specific business","personas":[{"emoji":"üë©","name":"Real persona name, realistic age","role":"Actual job/lifestyle that fits this market","pain":"Specific pain point this business solves","motivation":"Why they would actually buy this","channel":"Best channel to reach them in India"},{"emoji":"üë®","name":"Real name 2, age","role":"Actual role","pain":"Their specific pain","motivation":"Their motivation","channel":"Reach channel"},{"emoji":"üßë","name":"Real name 3, age","role":"Actual role","pain":"Their specific pain","motivation":"Their motivation","channel":"Reach channel"}],"competitors":[{"name":"REAL competitor name in this market","strength":"Their actual competitive strength","weakness":"Their actual weakness","price_range":"Real price range in INR"},{"name":"Real competitor 2","strength":"real strength","weakness":"real weakness","price_range":"real INR range"},{"name":"Real competitor 3 or indirect competitor","strength":"real strength","weakness":"real weakness","price_range":"real INR range"}],"trends":["real current market trend 1 relevant to this business","real trend 2","real trend 3","real trend 4"],"gtm":{"phase1":"Specific Month 1-3 launch strategy for this business","phase2":"Specific Month 4-6 growth strategy","phase3":"Specific Month 7-12 scale strategy"},"india_insight":"specific actionable India market insight for this exact business"}';
  var r=await ai(p);
  var b=document.getElementById('mr-rb');
  b.innerHTML=card('üìä','Market Size ‚Äî TAM / SAM / SOM','<div class="stg"><div class="stb"><div class="stv" style="font-size:.95rem">'+(r.tam||'‚Äî')+'</div><div class="stk">TAM (Total)</div></div><div class="stb"><div class="stv" style="font-size:.95rem">'+(r.sam||'‚Äî')+'</div><div class="stk">SAM (Serviceable)</div></div><div class="stb"><div class="stv" style="font-size:.95rem">'+(r.som||'‚Äî')+'</div><div class="stk">SOM (Obtainable)</div></div></div>'+(r.market_summary?'<div class="cbod" style="margin-top:11px"><p>'+r.market_summary+'</p>'+(r.market_growth?'<p style="color:var(--gr);font-weight:700">üìà Market Growth: '+r.market_growth+'</p>':'')+'</div>':''))+
  (r.personas&&r.personas.length?card('üë•','Customer Personas','<div class="peg">'+r.personas.map(function(p){return'<div class="pec"><span class="peav">'+(p.emoji||'üë§')+'</span><div class="penm">'+(p.name||'')+'</div><div class="perl">'+(p.role||'')+'</div><div class="pedt"><strong>Pain:</strong> '+(p.pain||'')+'<br><strong>Motivation:</strong> '+(p.motivation||'')+'<br><strong>Reach via:</strong> '+(p.channel||'')+'</div></div>'}).join('')+'</div>'):'')+
  (r.competitors&&r.competitors.length?card('‚öîÔ∏è','Competitive Landscape','<div class="ptb"><div class="pr phd"><span>Competitor</span><span>Price</span><span>Strength</span><span>Weakness</span></div>'+r.competitors.map(function(c){return'<div class="pr"><span><strong>'+(c.name||'')+'</strong></span><span class="pv">'+(c.price_range||'')+'</span><span>'+(c.strength||'')+'</span><span>'+(c.weakness||'')+'</span></div>'}).join('')+'</div>'):'')+
  (r.trends&&r.trends.length?card('üìà','Key Market Trends','<div class="tline">'+r.trends.map(function(t){return tli('',t)}).join('')+'</div>'):'')+
  (r.gtm?card('üó∫Ô∏è','Go-To-Market Strategy','<div class="tline">'+[['Phase 1 (Month 1‚Äì3)',r.gtm.phase1],['Phase 2 (Month 4‚Äì6)',r.gtm.phase2],['Phase 3 (Month 7‚Äì12)',r.gtm.phase3]].map(function(ph){return tli(ph[0],ph[1]||'')}).join('')+'</div>'):'')+
  (r.india_insight?card('üáÆüá≥','India Market Insight','<div class="cbod"><p>'+r.india_insight+'</p></div>'):'');
  document.getElementById('mr-br').innerHTML=brf('Market Research Report');
  shr('mr');md(2);toast('Market research complete!','s');
}

/* 3. BRAND NAMES */
async function bn(){
  var ind=document.getElementById('bn-i').value.trim();
  if(!ind){toast('Please enter your industry/business type.','w');return}
  shl('bn');
  var l=gl();
  var p='Industry: '+ind+'\nLanguage feel: '+document.getElementById('bn-l').value+'\nKeywords: '+(document.getElementById('bn-k').value||'')+'\nAudience: '+(document.getElementById('bn-a').value||'')+'\nPersonality: '+document.getElementById('bn-p').value+'\nAvoid: '+(document.getElementById('bn-av').value||'none')+'\n\nGenerate 8 unique business names. Return JSON:\n{"names":[{"name":"CreativeUniqueName1","tagline":"Catchy tagline for this name","meaning":"Why this name works for this business","domain_tip":"suggest specific .in or .com domain","style":"Modern/Traditional/Hybrid"},{"name":"CreativeUniqueName2","tagline":"tagline","meaning":"meaning","domain_tip":"domain suggestion","style":"style"},{"name":"CreativeUniqueName3","tagline":"tagline","meaning":"meaning","domain_tip":"domain suggestion","style":"style"},{"name":"CreativeUniqueName4","tagline":"tagline","meaning":"meaning","domain_tip":"domain suggestion","style":"style"},{"name":"CreativeUniqueName5","tagline":"tagline","meaning":"meaning","domain_tip":"domain suggestion","style":"style"},{"name":"CreativeUniqueName6","tagline":"tagline","meaning":"meaning","domain_tip":"domain suggestion","style":"style"},{"name":"CreativeUniqueName7","tagline":"tagline","meaning":"meaning","domain_tip":"domain suggestion","style":"style"},{"name":"CreativeUniqueName8","tagline":"tagline","meaning":"meaning","domain_tip":"domain suggestion","style":"style"}],"brand_colors":[{"color":"Specific Color Name","hex":"#ACTUAL_HEX","psychology":"what this color conveys for this brand"},{"color":"Color 2","hex":"#ACTUAL_HEX","psychology":"psychology"},{"color":"Color 3","hex":"#ACTUAL_HEX","psychology":"psychology"}],"naming_strategy":"explain the creative approach used for these specific names","top_pick":"BestOfThe8Names","top_pick_reason":"specific reason why this is the strongest choice for this business"}';
  var r=await ai(p);
  var b=document.getElementById('bn-rb');
  b.innerHTML=(r.names&&r.names.length?card('‚ú®','Your 8 Brand Names',(r.top_pick?'<div style="background:var(--gs);border:1px solid var(--brg);border-radius:var(--r8);padding:10px 14px;margin-bottom:11px;font-size:.8rem;color:var(--g2)"><strong>‚≠ê Top Pick: '+r.top_pick+'</strong> ‚Äî '+(r.top_pick_reason||'')+'</div>':'')+'<div class="nmg">'+r.names.map(function(n){return'<div class="nmc"><div class="nmw">'+n.name+'</div><div class="nmt">"'+(n.tagline||'')+'"</div><div class="nmm">'+(n.meaning||'')+'</div>'+(n.domain_tip?'<div style="font-size:.65rem;color:var(--gr);margin-top:4px">üåê '+(n.domain_tip)+'</div>':'')+'</div>'}).join('')+'</div>'):'')+
  (r.brand_colors&&r.brand_colors.length?card('üé®','Recommended Brand Colours','<div style="display:flex;gap:9px;flex-wrap:wrap;margin-top:10px">'+r.brand_colors.map(function(c){return'<div style="flex:1;min-width:120px;background:var(--bg3);border:1px solid var(--br);border-radius:var(--r8);padding:13px;text-align:center"><div style="width:42px;height:42px;border-radius:8px;background:'+c.hex+';margin:0 auto 8px;box-shadow:0 2px 10px rgba(0,0,0,.1)"></div><div style="font-weight:700;font-size:.77rem;color:var(--t1);margin-bottom:2px">'+c.color+'</div><div style="font-size:.65rem;color:var(--t4)">'+c.hex+'</div><div style="font-size:.7rem;color:var(--t3);margin-top:4px;line-height:1.4">'+(c.psychology||'')+'</div></div>'}).join('')+'</div>'):'')+
  (r.naming_strategy?card('üß†','Naming Strategy','<div class="cbod"><p>'+r.naming_strategy+'</p></div>'):'');
  document.getElementById('bn-br').innerHTML=brf('Brand Name Studio Report');
  shr('bn');md(3);toast('Brand names generated!','s');
}

/* 4. BUSINESS PLAN */
async function bp(){
  var desc=document.getElementById('bp-d').value.trim();
  if(desc.length<15){toast('Please describe your business in more detail.','w');return}
  shl('bp');
  var l=gl();
  var p='Business Name: '+(document.getElementById('bp-n').value||'My Business')+'\nStructure: '+document.getElementById('bp-s').value+'\nDescription: '+desc+'\nMonthly Revenue Goal: Rs '+(document.getElementById('bp-r').value||'not specified')+'\nCity: '+(document.getElementById('bp-c').value||'India')+'\nTeam: '+document.getElementById('bp-t').value+'\nYear 1 Goals: '+(document.getElementById('bp-g').value||'not specified')+'\n\nReturn JSON:\n{"executive_summary":"compelling 3-4 sentence summary of this specific business","vision":"clear one-sentence long-term vision","mission":"specific mission statement for this business","value_proposition":"clear statement of unique value for customers","revenue_streams":[{"stream":"Primary revenue stream name","description":"how this specific stream generates money","potential":"realistic INR monthly potential"},{"stream":"Secondary stream name","description":"how it works","potential":"realistic INR potential"}],"cost_structure":[{"category":"Staff/Team","items":"specific roles needed","monthly_est":"realistic INR estimate"},{"category":"Operations","items":"specific operational costs","monthly_est":"realistic INR estimate"},{"category":"Marketing","items":"specific channels","monthly_est":"realistic INR estimate"}],"roadmap":[{"phase":"Month 1-3","title":"Launch Phase","milestones":["specific milestone 1","specific milestone 2"]},{"phase":"Month 4-6","title":"Growth Phase","milestones":["specific milestone 1","specific milestone 2"]},{"phase":"Month 7-12","title":"Scale Phase","milestones":["specific milestone 1","specific milestone 2"]}],"success_metrics":["specific KPI 1 with target","specific KPI 2","specific KPI 3","specific KPI 4"],"risks":["Specific risk 1 for this business + mitigation strategy","Specific risk 2 + mitigation"]}';
  var r=await ai(p);
  var b=document.getElementById('bp-rb');
  b.innerHTML=card('üìã','Executive Summary','<div class="cbod"><p>'+(r.executive_summary||'')+'</p>'+(r.vision?'<p><strong>Vision:</strong> '+r.vision+'</p>':'')+(r.mission?'<p><strong>Mission:</strong> '+r.mission+'</p>':'')+(r.value_proposition?'<p><strong>Value Proposition:</strong> '+r.value_proposition+'</p>':'')+'</div>')+
  (r.revenue_streams&&r.revenue_streams.length?card('üí∞','Revenue Streams','<div class="ptb"><div class="pr phd"><span>Stream</span><span>How it works</span><span>Monthly Potential</span><span></span></div>'+r.revenue_streams.map(function(s){return'<div class="pr"><span><strong>'+(s.stream||'')+'</strong></span><span>'+(s.description||'')+'</span><span class="pv">'+(s.potential||'')+'</span><span></span></div>'}).join('')+'</div>'):'')+
  (r.cost_structure&&r.cost_structure.length?card('üìâ','Cost Structure','<div class="ptb"><div class="pr phd"><span>Category</span><span>Items</span><span>Monthly Est.</span><span></span></div>'+r.cost_structure.map(function(c){return'<div class="pr"><span><strong>'+(c.category||'')+'</strong></span><span>'+(c.items||'')+'</span><span class="pv">'+(c.monthly_est||'')+'</span><span></span></div>'}).join('')+'</div>'):'')+
  (r.roadmap&&r.roadmap.length?card('üóìÔ∏è','12-Month Roadmap','<div class="tline">'+r.roadmap.map(function(ph){return tli(ph.phase+' ‚Äî '+ph.title,(ph.milestones||[]).join(' ¬∑ '))}).join('')+'</div>'):'')+
  (r.success_metrics&&r.success_metrics.length?card('üéØ','Key Success Metrics','<div class="cbod"><p>'+r.success_metrics.join(' &nbsp;¬∑&nbsp; ')+'</p></div>'):'')+
  (r.risks&&r.risks.length?card('‚ö†Ô∏è','Risk Mitigation','<div class="tline">'+r.risks.map(function(rk){return tli('',rk)}).join('')+'</div>'):'');
  document.getElementById('bp-br').innerHTML=brf('Business Plan');
  shr('bp');md(4);toast('Business plan ready!','s');
}

/* 5. PRICING */
async function ps(){
  var prod=document.getElementById('ps-p').value.trim();
  if(prod.length<10){toast('Please describe your product/service.','w');return}
  shl('ps');
  var l=gl();
  var p='Product/Service: '+prod+'\nCost per unit: Rs '+(document.getElementById('ps-c').value||'unknown')+'\nTarget income: '+document.getElementById('ps-i').value+'\nCompetitor prices: '+(document.getElementById('ps-cp').value||'unknown')+'\nModels: '+(gch('ps-ch')||'flexible')+'\nGoal: '+document.getElementById('ps-g').value+'\n\nReturn JSON:\n{"recommended_price":"CALCULATED price in INR based on actual cost and market data","confidence":"High/Medium/Low","recommendation_reason":"specific reason based on the actual cost, competitors and target market","models":[{"name":"Cost-Plus Pricing","price":"INR calculated from actual cost provided","margin":"calculated % margin","pros":"specific advantage for this product","cons":"specific disadvantage","best_for":"specific scenario"},{"name":"Value-Based Pricing","price":"INR based on customer value","margin":"estimated margin","pros":"specific advantage","cons":"specific disadvantage","best_for":"specific scenario"},{"name":"Competitive Pricing","price":"INR based on competitor range provided","margin":"estimated margin","pros":"specific advantage","cons":"specific disadvantage","best_for":"specific scenario"}],"upsell_architecture":[{"tier":"Basic","price":"INR price","includes":"specific features for basic tier"},{"tier":"Standard","price":"INR price","includes":"specific features for standard"},{"tier":"Premium","price":"INR price","includes":"specific premium features"}],"psychological_tips":["specific psychological pricing tip for Indian market","specific tip 2","specific tip 3"],"india_pricing_insight":"specific actionable India pricing insight for this product/market"}';
  var r=await ai(p);
  var b=document.getElementById('ps-rb');
  b.innerHTML='<div class="scr"><div style="text-align:center"><div style="font-family:Syne,sans-serif;font-size:1.9rem;font-weight:800;color:var(--g2)">'+(r.recommended_price||'‚Äî')+'</div><div style="font-size:.6rem;color:var(--t4);letter-spacing:1px;text-transform:uppercase;margin-top:3px">Recommended Price</div><div style="margin-top:7px;font-size:.68rem;padding:3px 11px;border-radius:100px;background:var(--grs);color:var(--gr);display:inline-block">'+(r.confidence||'')+'</div></div><div><div class="sverd">Pricing Recommendation</div><div class="shnt">'+(r.recommendation_reason||'')+'</div></div></div>'+
  (r.models&&r.models.length?card('‚öñÔ∏è','3 Pricing Models Compared','<div class="ptb"><div class="pr phd"><span>Model</span><span>Price</span><span>Margin</span><span>Best For</span></div>'+r.models.map(function(m){return'<div class="pr"><span><strong>'+(m.name||'')+'</strong></span><span class="pv">'+(m.price||'')+'</span><span>'+(m.margin||'')+'</span><span>'+(m.best_for||'')+'</span></div>'}).join('')+'</div>'):'')+
  (r.upsell_architecture&&r.upsell_architecture.length?card('üèÜ','3-Tier Upsell Architecture','<div class="t3g">'+r.upsell_architecture.map(function(t,i){var bg=['var(--bls)','var(--gs)','rgba(124,58,237,.07)'][i],bd=['rgba(37,99,235,.16)','var(--brg)','rgba(124,58,237,.16)'][i];return'<div class="t3c" style="background:'+bg+';border:1px solid '+bd+'"><div class="t3l">'+(t.tier||'')+'</div><div class="t3p">'+(t.price||'')+'</div><div class="t3i">'+(t.includes||'')+'</div></div>'}).join('')+'</div>'):'')+
  (r.psychological_tips&&r.psychological_tips.length?card('üß†','Psychological Pricing Tips','<div class="tline">'+r.psychological_tips.map(function(t){return tli('',t)}).join('')+'</div>'):'')+
  (r.india_pricing_insight?card('üáÆüá≥','India Pricing Insight','<div class="cbod"><p>'+r.india_pricing_insight+'</p></div>'):'');
  document.getElementById('ps-br').innerHTML=brf('Pricing Strategy Report');
  shr('ps');md(5);toast('Pricing strategy ready!','s');
}

/* 6. FINANCIALS */
async function fp(){
  var arpu=parseFloat((document.getElementById('fp-ar').value||'500').replace(/,/g,''))||500;
  var cust=parseInt(document.getElementById('fp-cu').value)||50;
  var gr=parseInt(document.getElementById('fp-gr').value)||15;
  var fixed=parseFloat((document.getElementById('fp-fc').value||'40000').replace(/,/g,''))||40000;
  var varC=parseFloat((document.getElementById('fp-vc').value||'200').replace(/,/g,''))||200;
  var inv=parseFloat((document.getElementById('fp-iv').value||'500000').replace(/,/g,''))||500000;
  var name=document.getElementById('fp-n').value||'My Business';
  shl('fp');
  /* Local calculation */
  var months=[],cum=-inv,beM=null;
  for(var i=1;i<=12;i++){var c=Math.round(cust*Math.pow(1+gr/100,i-1)),rev=c*arpu,cost=fixed+(c*varC),profit=rev-cost;cum+=profit;if(!beM&&cum>=0)beM=i;months.push({m:'M'+i,c:c,rev:rev,cost:cost,profit:profit,cum:cum})}
  var totRev=months.reduce(function(s,m){return s+m.rev},0);
  var totProf=months.reduce(function(s,m){return s+m.profit},0);
  var roi=inv>0?Math.round((totProf/inv)*100):0;
  var l=gl();
  var p='Business: '+name+'\nInvestment: Rs '+inv.toLocaleString('en-IN')+'\nYear 1 Revenue: Rs '+totRev.toLocaleString('en-IN')+'\nYear 1 Profit: Rs '+totProf.toLocaleString('en-IN')+'\nBreak-even: Month '+(beM||'not in Year 1')+'\nROI: '+roi+'%'+'\n\nReturn JSON:\n{"financial_health":"Good/Fair/Needs Attention based on actual numbers","summary":"specific 2-3 sentence financial assessment of these actual numbers","improvement_tips":["specific actionable tip to improve these numbers","specific tip 2","specific tip 3"],"india_benchmark":"how these specific numbers compare to Indian SMEs in this industry","year2_outlook":"realistic Year 2 projection based on the growth rate provided"}';
  var ai_r=await ai(p);
  var fmt=function(n){return'Rs '+Math.abs(Math.round(n)).toLocaleString('en-IN')};
  var b=document.getElementById('fp-rb');
  b.innerHTML='<div class="scr"><div style="text-align:center"><div style="font-family:Syne,sans-serif;font-size:1.9rem;font-weight:800;color:var(--g2)">'+roi+'%</div><div style="font-size:.58rem;color:var(--t4);letter-spacing:1px;text-transform:uppercase;margin-top:2px">Year 1 ROI</div></div><div><div class="sverd">'+(ai_r.financial_health||'Financial Summary')+'</div><div class="shnt">'+(ai_r.summary||'')+'</div></div></div>'+
  '<div class="stg"><div class="stb"><div class="stv" style="font-size:.92rem">'+fmt(totRev)+'</div><div class="stk">Year 1 Revenue</div></div><div class="stb"><div class="stv" style="font-size:.92rem;color:'+(totProf>=0?'var(--gr)':'var(--rd)')+'">'+fmt(totProf)+'</div><div class="stk">Year 1 Profit</div></div><div class="stb"><div class="stv">'+(beM?'Month '+beM:'Year 2+')+'</div><div class="stk">Break-Even</div></div></div>'+
  card('üìä','12-Month P&L Projection','<div class="ftb"><div class="fr fhd"><span>Month</span><span>Revenue</span><span>Costs</span><span>Profit</span><span>Cumulative</span></div>'+months.map(function(m){return'<div class="fr'+(m.m==='M12'?' ftot':'')+'"><span>'+m.m+' ('+m.c+')</span><span>'+fmt(m.rev)+'</span><span class="neg">'+fmt(m.cost)+'</span><span class="'+(m.profit>=0?'pos':'neg')+'">'+fmt(m.profit)+'</span><span class="'+(m.cum>=0?'pos':'neg')+'">'+fmt(m.cum)+'</span></div>'}).join('')+'</div>')+
  (ai_r.improvement_tips&&ai_r.improvement_tips.length?card('üí°','AI Improvement Recommendations','<div class="tline">'+ai_r.improvement_tips.map(function(t){return tli('',t)}).join('')+'</div>'):'')+
  (ai_r.india_benchmark?card('üáÆüá≥','India SME Benchmark','<div class="cbod"><p>'+ai_r.india_benchmark+'</p></div>'):'')+
  (ai_r.year2_outlook?card('üî≠','Year 2 Outlook','<div class="cbod"><p>'+ai_r.year2_outlook+'</p></div>'):'');
  document.getElementById('fp-br').innerHTML=brf('Financial Projections Report');
  shr('fp');md(6);toast('Financial projections ready!','s');
}

/* 7. PITCH DECK */
async function pd(){
  var one=document.getElementById('pd-on').value.trim();
  if(one.length<10){toast('Please enter your one-line business description.','w');return}
  shl('pd');
  var l=gl();
  var p='Company: '+(document.getElementById('pd-co').value||'My Company')+'\nStage: '+document.getElementById('pd-st').value+'\nOne-liner: '+one+'\nProblem: '+(document.getElementById('pd-pr').value||'')+'\nSolution: '+(document.getElementById('pd-so').value||'')+'\nAsk: Rs '+(document.getElementById('pd-as').value||'')+'\nTraction: '+(document.getElementById('pd-tr').value||'early stage')+'\nUse of funds: '+(document.getElementById('pd-uf').value||'')+'\n\nReturn JSON:\n{"hook":"powerful specific opening hook for THIS business that grabs investor attention","slides":[{"num":1,"title":"Cover Slide","content":"specific content for this company ‚Äî name, tagline, sector","talking_points":"specific things to say about this company"},{"num":2,"title":"The Problem","content":"specific problem this business solves with data","talking_points":"how to present this specific problem compellingly"},{"num":3,"title":"Our Solution","content":"specific solution and how it works","talking_points":"demo or explanation talking points"},{"num":4,"title":"Market Opportunity","content":"specific TAM/SAM/SOM for this market","talking_points":"market size talking points"},{"num":5,"title":"Business Model","content":"specific revenue model for this business","talking_points":"how we make money"},{"num":6,"title":"Traction & Validation","content":"specific traction numbers provided","talking_points":"validation story"},{"num":7,"title":"The Team","content":"team requirements for this business","talking_points":"why this team can win"},{"num":8,"title":"Financial Projections","content":"projections based on funding ask","talking_points":"key financial metrics"},{"num":9,"title":"The Ask","content":"specific funding amount and use","talking_points":"justify the ask"},{"num":10,"title":"Thank You & Next Steps","content":"contact and next steps","talking_points":"closing and call to action"}],"closing_tip":"specific actionable India fundraising tip for this stage and sector"}';
  var r=await ai(p);
  var b=document.getElementById('pd-rb');
  b.innerHTML=(r.hook?card('üé§','Your Opening Hook','<div class="cbod"><p style="font-family:Syne,sans-serif;font-size:1rem;font-style:italic;color:var(--g2)">"'+r.hook+'"</p></div>'):'')+
  (r.slides&&r.slides.length?card('üìë','10-Slide Pitch Deck Outline','<div class="slg">'+r.slides.map(function(s){return'<div class="slc"><div class="slnum">Slide '+s.num+'</div><div class="slt">'+s.title+'</div><div class="sln"><strong>Content:</strong> '+(s.content||'')+'<br><strong>Talk track:</strong> '+(s.talking_points||'')+'</div></div>'}).join('')+'</div>'):'')+
  (r.closing_tip?card('üíé','India Fundraising Tip','<div class="cbod"><p>'+r.closing_tip+'</p></div>'):'');
  document.getElementById('pd-br').innerHTML=brf('Pitch Deck Outline');
  shr('pd');md(7);toast('Pitch deck outline ready!','s');
}

/* 8. LEGAL */
async function lc(){
  var biz=document.getElementById('lc-b').value.trim();
  if(!biz){toast('Please describe your business type.','w');return}
  shl('lc');
  var l=gl();
  var state=document.getElementById('lc-st').value;
  var p='Business: '+biz+'\nStructure: '+document.getElementById('lc-s').value+'\nState: '+state+'\nRevenue: '+document.getElementById('lc-r').value+'\nSpecial categories: '+(gch('lc-ch')||'none')+'\n\nReturn JSON:\n{"summary":"specific 2-3 sentence compliance overview for this exact business type and state","priority_alert":"the single most urgent compliance action for this specific business","registrations":[{"icon":"üìã","name":"actual registration needed 1","authority":"actual authority","timeline":"actual timeline","cost":"actual INR cost","mandatory":true_or_false,"detail":"why this is needed for this specific business"},{"icon":"üìÑ","name":"actual registration 2","authority":"authority","timeline":"timeline","cost":"cost","mandatory":true_or_false,"detail":"why needed"},{"icon":"üìù","name":"actual registration 3","authority":"authority","timeline":"timeline","cost":"cost","mandatory":true_or_false,"detail":"why needed"},{"icon":"üè¶","name":"actual registration 4","authority":"authority","timeline":"timeline","cost":"cost","mandatory":true_or_false,"detail":"why needed"},{"icon":"‚öñÔ∏è","name":"actual registration 5 specific to this business/industry","authority":"authority","timeline":"timeline","cost":"cost","mandatory":true_or_false,"detail":"why needed for this type"}],"compliance_calendar":[{"period":"Within 30 days of starting","tasks":["specific task 1 for this business","specific task 2"]},{"period":"Within 90 days","tasks":["specific task 1","specific task 2"]},{"period":"Annually","tasks":["specific annual task 1","specific task 2","specific task 3"]}],"total_cost_estimate":"realistic INR range for this specific business structure and state","ca_needed":true_or_false_based_on_complexity,"state_specific":"'+state+'-specific legal requirement or regulation relevant to this business"}';
  var r=await ai(p);
  var b=document.getElementById('lc-rb');
  b.innerHTML=(r.priority_alert?'<div style="background:var(--rds);border:1px solid rgba(220,38,38,.2);border-radius:var(--r8);padding:12px 14px;margin-bottom:13px;font-size:.8rem;color:var(--rd)"><strong>‚ö° Priority Alert:</strong> '+r.priority_alert+'</div>':'')+
  card('‚öñÔ∏è','Compliance Overview','<div class="cbod"><p>'+(r.summary||'')+'</p>'+(r.total_cost_estimate?'<p style="margin-top:8px"><strong>üí∞ Estimated Cost:</strong> <span style="color:var(--g2);font-weight:700">'+r.total_cost_estimate+'</span></p>':'')+(r.ca_needed?'<p style="margin-top:7px;color:var(--gr);font-size:.78rem">‚úÖ Recommended: Hire a CA for first-year compliance ‚Äî saves money &amp; penalties</p>':'')+'</div>')+
  (r.registrations&&r.registrations.length?card('üìã','Required Registrations &amp; Licences','<div class="leg">'+r.registrations.map(function(reg){return'<div class="lec"><div class="lei">'+(reg.icon||'üìÑ')+'</div><div><div class="len">'+reg.name+(reg.mandatory?' <span style="color:var(--rd);font-size:.61rem">*Required</span>':' <span style="color:var(--t5);font-size:.61rem">Optional</span>')+'</div><div class="led">'+(reg.detail||'')+' ‚Äî '+(reg.authority||'')+'</div><div class="lec2">‚è± '+(reg.timeline||'')+'  ¬∑ üí∞ '+(reg.cost||'')+'</div></div></div>'}).join('')+'</div>'):'')+
  (r.compliance_calendar&&r.compliance_calendar.length?card('üìÖ','Compliance Calendar','<div class="tline">'+r.compliance_calendar.map(function(cc){return tli(cc.period,(cc.tasks||[]).join(' ¬∑ '))}).join('')+'</div>'):'')+
  (r.state_specific?card('üó∫Ô∏è',state+'-Specific Requirements','<div class="cbod"><p>'+r.state_specific+'</p></div>'):'');
  document.getElementById('lc-br').innerHTML=brf('Legal & Compliance Checklist');
  shr('lc');md(8);toast('Legal checklist ready!','s');
}

/* COPY */
async function cp(id){
  var el=document.getElementById(id);if(!el)return;
  try{await navigator.clipboard.writeText(el.innerText);toast('Result copied!','s')}
  catch(e){toast('Copy failed ‚Äî select text manually.','e')}
}

/* WHATSAPP */
var _waKey='',_waMod='';
function wa(key,modName){
  _waKey=key; _waMod=modName;
  document.getElementById('wa-overlay').classList.add('open');
}
function closeWA(){
  document.getElementById('wa-overlay').classList.remove('open');
}
function sendWA(){
  var num=(document.getElementById('wa-num').value||'').trim().replace(/[^0-9]/g,'');
  var sender=(document.getElementById('wa-sender').value||'').trim();
  var el=document.getElementById(_waKey+'-rb');
  var preview=el?el.innerText.slice(0,280).trim():'';
  var msg='üï∑Ô∏è *K Spider AI Business Consultant*\n\n'+
    '‚úÖ *'+_waMod+'* Analysis Report'+(sender?'\nShared by: '+sender:'')+
    '\n\n'+(preview?'üìã *Preview:*\n'+preview+'...\n\n':'')+
    'üåê *Try FREE:* '+KS.tool+'\n\n'+
    'üì∫ *YouTube:*\n'+
    '‚ñ∂ K Spider for Kreation: '+KS.yt1+'\n'+
    '‚öïÔ∏è Doctor Shreyansh Raval: '+KS.yt2+'\n'+
    'üéµ SwarSeIshwarTak: '+KS.yt3+'\n\n'+
    '‚Äî '+KS.co+' | '+KS.founders;
  var encoded=encodeURIComponent(msg);
  var url=num?'https://wa.me/'+num+'?text='+encoded:'https://wa.me/?text='+encoded;
  var a=document.createElement('a');
  a.href=url; a.target='_blank'; a.rel='noopener';
  document.body.appendChild(a); a.click(); a.remove();
  closeWA();
  toast('WhatsApp opening...','s');
}

/* PDF ‚Äî Module */
/* PDF via browser print ‚Äî works in all browsers, all languages */
function mpdf(key,title){
  var el=document.getElementById(key+'-rb');
  if(!el||!el.innerHTML.trim()){toast('No result to export yet. Please generate the report first.','w');return}
  doPrint(el.innerHTML, title);
}

function fullPDF(){
  var mods=[{k:'iv',t:'Idea Validation'},{k:'mr',t:'Market Research'},{k:'bn',t:'Brand Name Studio'},{k:'bp',t:'Business Plan'},{k:'ps',t:'Pricing Strategy'},{k:'fp',t:'Financial Projections'},{k:'pd',t:'Pitch Deck Outline'},{k:'lc',t:'Legal Checklist'}];
  var combined='';var count=0;
  mods.forEach(function(m){
    var el=document.getElementById(m.k+'-rb');
    if(el&&el.innerHTML.trim()){
      combined+='<div style="page-break-before:'+(count>0?'always':'auto')+'"><h2 style="font-family:Arial;color:#b8792a;font-size:14pt;border-bottom:2px solid #b8792a;padding-bottom:6px;margin-bottom:16px">'+m.t+'</h2>'+el.innerHTML+'</div>';
      count++;
    }
  });
  if(!count){toast('Complete at least 1 module before exporting.','w');return}
  doPrint(combined,'K Spider AI Business Consultant ‚Äî Full Report');
}

function doPrint(html,title){
  var css='body{font-family:Arial,sans-serif;background:#fff;color:#1a1814;padding:20px 30px;max-width:900px;margin:0 auto}.card{border:1px solid #e0ddd8;border-radius:10px;padding:16px 18px;margin-bottom:14px;page-break-inside:avoid}.card::before{display:none}.chd{display:flex;align-items:center;gap:8px;margin-bottom:10px}.ct{font-weight:700;font-size:13px;color:#1a1814}.cbod{font-size:12px;color:#3a3530;line-height:1.75}.cbod p{margin-bottom:7px}.cbod strong{color:#1a1814}.scr{display:flex;align-items:center;gap:16px;background:#f8f5ee;border:1px solid #e8d5b0;border-radius:10px;padding:16px;margin-bottom:14px}.sverd{font-size:15px;font-weight:800;color:#1a1814;margin-bottom:4px}.shnt{font-size:12px;color:#3a3530;line-height:1.6}.snum{font-size:28px;font-weight:800;color:#d4922e}.sof{font-size:9px;color:#9a9490;letter-spacing:1px}.stxt{text-align:center}.srng{text-align:center;min-width:72px}.stg{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:10px 0}.stb{background:#f2f0eb;border:1px solid #e0ddd8;border-radius:8px;padding:10px;text-align:center}.stv{font-size:18px;font-weight:800;color:#d4922e;margin-bottom:2px}.stk{font-size:9px;color:#9a9490;text-transform:uppercase;letter-spacing:1px}.swg{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}.swc{border-radius:8px;padding:10px 12px}.ss{background:#f0fdf4;border:1px solid #bbf7d0}.sw{background:#fef2f2;border:1px solid #fecaca}.so{background:#eff6ff;border:1px solid #bfdbfe}.st{background:#fffbeb;border:1px solid #fde68a}.swl{font-size:9px;font-weight:800;letter-spacing:1px;text-transform:uppercase;display:block;margin-bottom:5px}.ss .swl{color:#059669}.sw .swl{color:#dc2626}.so .swl{color:#2563eb}.st .swl{color:#d97706}.swul{list-style:none}.swul li{font-size:11px;color:#3a3530;padding:2px 0;display:flex;gap:5px}.swul li::before{content:"‚Ä¢";flex-shrink:0}.ss .swul li::before{color:#059669}.sw .swul li::before{color:#dc2626}.so .swul li::before{color:#2563eb}.st .swul li::before{color:#d97706}.tline{display:flex;flex-direction:column}.tli{display:flex;gap:10px;align-items:flex-start;padding-bottom:10px}.tld{width:8px;height:8px;border-radius:50%;background:#d4922e;flex-shrink:0;margin-top:4px}.tll{width:1px;flex:1;background:#e0ddd8;min-height:14px;margin-top:3px}.tlm{display:flex;flex-direction:column;align-items:center;flex-shrink:0}.tli:last-child .tll{display:none}.tllb{font-size:9px;font-weight:800;color:#d4922e;letter-spacing:1px;text-transform:uppercase;margin-bottom:2px}.tlt{font-size:12px;color:#3a3530;line-height:1.5}.ptb{margin-top:8px}.pr{display:grid;grid-template-columns:1.8fr 1fr 1fr 1.8fr;gap:8px;padding:8px 10px;background:#f2f0eb;border-radius:4px;font-size:11px;margin-bottom:4px}.pr.phd{background:#eceae3;font-weight:700;font-size:9px;text-transform:uppercase;letter-spacing:.5px;color:#6a6460}.pv{color:#d4922e;font-weight:700}.t3g{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:8px}.t3c{border-radius:8px;padding:12px;text-align:center}.t3l{font-size:9px;font-weight:800;letter-spacing:1px;text-transform:uppercase;color:#9a9490;margin-bottom:3px}.t3p{font-size:20px;font-weight:800;color:#d4922e;margin-bottom:4px}.t3i{font-size:11px;color:#6a6460;line-height:1.4}.slg{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}.slc{background:#f2f0eb;border:1px solid #e0ddd8;border-radius:8px;padding:10px}.slnum{font-size:9px;font-weight:800;color:#d4922e;text-transform:uppercase;letter-spacing:1px;margin-bottom:3px}.slt{font-weight:700;font-size:12px;color:#1a1814;margin-bottom:3px}.sln{font-size:11px;color:#6a6460;line-height:1.4}.nmg{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}.nmc{background:#f2f0eb;border:1px solid #e0ddd8;border-radius:8px;padding:10px 12px}.nmw{font-size:15px;font-weight:800;color:#d4922e;margin-bottom:2px}.nmt{font-size:11px;color:#6a6460;font-style:italic;margin-bottom:3px}.nmm{font-size:10px;color:#9a9490;line-height:1.4}.leg{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:8px}.lec{display:flex;align-items:flex-start;gap:7px;padding:8px 10px;background:#f2f0eb;border:1px solid #e0ddd8;border-radius:8px}.len{font-weight:700;font-size:11px;color:#1a1814;margin-bottom:1px}.led{font-size:10px;color:#6a6460;line-height:1.3}.lec2{font-size:9px;color:#d4922e;font-weight:700;margin-top:2px}.ftb{margin-top:8px}.fr{display:grid;grid-template-columns:1.5fr repeat(4,1fr);gap:6px;padding:7px 10px;background:#f2f0eb;border-radius:4px;font-size:10px;margin-bottom:3px}.fr.fhd{background:#eceae3;font-size:9px;font-weight:700;color:#6a6460;text-transform:uppercase}.pos{color:#059669;font-weight:600}.neg{color:#dc2626}.fr.ftot{background:#fef9ee;border:1px solid #d4922e55;font-weight:700}.pec{background:#f2f0eb;border:1px solid #e0ddd8;border-radius:8px;padding:10px}.peg{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:8px}.peav{font-size:24px;margin-bottom:4px;display:block}.penm{font-weight:700;font-size:12px;color:#1a1814;margin-bottom:2px}.perl{font-size:10px;color:#d4922e;font-weight:600;margin-bottom:5px}.pedt{font-size:11px;color:#6a6460;line-height:1.4}.brf{background:#1a1814;color:#fff;border-radius:10px;padding:14px 18px;margin-top:16px;page-break-inside:avoid}.brf-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.bfbn{font-size:13px;font-weight:800;color:#fff}.bfbn span{color:#f0a830}.brf-chs{display:grid;grid-template-columns:repeat(2,1fr);gap:6px;margin-bottom:10px}.bfch{display:flex;align-items:center;gap:6px;padding:6px 8px;background:rgba(255,255,255,.08);border-radius:6px;text-decoration:none}.bfcn{font-size:10px;font-weight:600;color:rgba(255,255,255,.85)}.bfcns{font-size:9px;color:rgba(255,255,255,.4)}.bfci{width:20px;height:20px;border-radius:4px;background:#ff0000;display:flex;align-items:center;justify-content:center;font-size:10px;flex-shrink:0}.bfdisc{font-size:9px;color:rgba(255,255,255,.3);line-height:1.5;border-top:1px solid rgba(255,255,255,.1);padding-top:8px}.bfurl{font-size:10px;font-weight:700;color:#f0a830}@media print{.brf{-webkit-print-color-adjust:exact;print-color-adjust:exact}svg{display:none}.srng::after{content:attr(data-score);font-size:24px;font-weight:800;color:#d4922e}}';
  var header='<div style="border-bottom:3px solid #b8792a;padding-bottom:12px;margin-bottom:20px">'+
    '<div style="font-size:20pt;font-weight:800;color:#b8792a;font-family:Arial">üï∑Ô∏è K Spider AI Business Consultant</div>'+
    '<div style="font-size:12pt;color:#3a3530;margin-top:4px;font-family:Arial">'+title+'</div>'+
    '<div style="font-size:9pt;color:#9a9490;margin-top:4px;font-family:Arial">www.kspiderai.in &nbsp;¬∑&nbsp; By Gaurang Raval &amp; Khush Raval &nbsp;¬∑&nbsp; Generated: '+new Date().toLocaleDateString('en-IN')+'</div>'+
    '</div>';
  var fullHtml='<!DOCTYPE html><html><head><meta charset="UTF-8"><title>'+title+'</title><style>'+css+'</style></head><body>'+header+html+'</body></html>';
  // Create blob and download ‚Äî works on mobile without popup
  var blob=new Blob([fullHtml],{type:'text/html;charset=utf-8'});
  var url=URL.createObjectURL(blob);
  var a=document.createElement('a');
  a.href=url;
  a.download='KSpider-'+title.replace(/[^a-zA-Z0-9]/g,'-').replace(/-+/g,'-')+'-'+new Date().toISOString().slice(0,10)+'.html';
  document.body.appendChild(a);
  a.click();
  setTimeout(function(){URL.revokeObjectURL(url);a.remove()},2000);
  toast('üìÑ Report downloaded! Open the file and use browser Print ‚Üí Save as PDF','s');
}
/* Init */
document.addEventListener('DOMContentLoaded',function(){
  try{var u=JSON.parse(localStorage.getItem('ks_u')||'{}');if(u&&u.v&&u.v.name)toast('Welcome back, '+u.v.name.split(' ')[0]+'! Ready to analyse your business?','tip')}catch(e){}
});
</script>

<!-- WhatsApp Share Modal -->
<div class="wa-overlay" id="wa-overlay" onclick="if(event.target===this)closeWA()">
  <div class="wa-modal">
    <h3>üì§ WhatsApp Share</h3>
    <p>Enter a phone number to send directly (without saving), or leave blank to pick a contact.</p>
    <div class="fg">
      <label>Phone Number (with country code, no +)</label>
      <input type="tel" id="wa-num" placeholder="e.g. 919876543210 ‚Äî leave blank to choose contact">
    </div>
    <div class="fg">
      <label>Your Name / Business (optional)</label>
      <input type="text" id="wa-sender" placeholder="e.g. Gaurang from K Spider">
    </div>
    <div class="wa-btns">
      <button class="wa-cancel" onclick="closeWA()">Cancel</button>
      <button class="wa-send" onclick="sendWA()">üí¨ Send on WhatsApp</button>
    </div>
    <div class="wa-note">‚ÑπÔ∏è Number not saved. Leave blank to choose any contact in WhatsApp.</div>
  </div>
</div>
</body>
</html>
